<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Demon Slayer RPG</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Cinzel:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* --- CORE THEME (From Character Creation) - MATCHES MOCKUP --- */
        :root {
            --bg-dark: #0a0a0f;
            --bg-panel: #141419;
            --text-main: #ffffff;
            --text-muted: #888;
            --accent-red: #d90429;
            --accent-red-hover: #ef233c;
            --accent-purple: #9d4edd;
            --accent-cyan: #00b4d8;
            --border-color: #2a2a35;
            --font-main: 'Outfit', sans-serif;
            --font-display: 'Cinzel', serif;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: var(--font-main);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* --- LEFT SIDEBAR (Navigation) --- */
        .sidebar-left {
            width: 260px;
            background: var(--bg-panel);
            border-right: 1px solid var(--border-color);
            padding: 2rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            flex-shrink: 0;
            z-index: 10;
        }

        .app-logo {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.2rem;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-steps {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            font-weight: 500;
        }

        .nav-item:hover,
        .nav-item.active {
            background: hsla(0, 0%, 100%, 0.05);
            color: white;
        }

        .nav-item.active {
            border-right: 3px solid var(--accent-red);
            background: linear-gradient(90deg, rgba(217, 4, 41, 0.1), transparent);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
        }

        /* --- MAIN CONTENT (Center) --- */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 2rem 4rem;
            scroll-behavior: smooth;
            position: relative;
        }

        .page-header {
            margin-bottom: 3rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        .breadcrumbs {
            color: var(--accent-red);
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .page-title {
            font-family: var(--font-display);
            font-size: 2.5rem;
            margin: 0;
            line-height: 1.1;
        }

        .page-subtitle {
            color: var(--text-muted);
            margin-top: 5px;
            font-weight: 300;
        }

        /* Sections */
        .dashboard-section {
            display: none;
            /* Hidden by default for Tabbed View */
            margin-bottom: 4rem;
            animation: fadeIn 0.3s ease-out;
        }

        .dashboard-section.active-tab {
            display: block;
            /* Shown only when active */
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
            margin-bottom: 2rem;
        }

        .sec-title {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: var(--font-display);
            color: white;
        }

        /* --- RIGHT SIDEBAR (Summary) --- */
        .sidebar-right {
            width: 340px;
            background: #0e0e12;
            border-left: 1px solid var(--border-color);
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            flex-shrink: 0;
            overflow-y: auto;
        }

        /* --- DASHBOARD SPECIFIC COMPONENTS --- */

        /* 1. Attributes Hexagon (Ported) */
        /* === ENHANCED ATTRIBUTES SYSTEM === */
        .attributes-section {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .radar-chart-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        /* 1. Attributes Radar Chart (Enhanced) */
        .attributes-container {
            position: relative;
            width: 350px;
            height: 350px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle, rgba(157, 78, 221, 0.05) 0%, transparent 70%);
            border-radius: 50%;
            padding: 1rem;
        }

        .stat-svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 15px rgba(157, 78, 221, 0.3));
        }

        .stat-label-text {
            fill: #888;
            font-size: 14px;
            font-family: var(--font-main);
            text-anchor: middle;
            font-weight: 600;
        }

        .stat-value {
            font-size: 16px;
            font-weight: 800;
            fill: white;
        }

        .stat-abbr {
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .radar-poly {
            fill: rgba(157, 78, 221, 0.3);
            stroke: var(--accent-purple);
            stroke-width: 2.5;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            filter: drop-shadow(0 0 8px rgba(157, 78, 221, 0.5));
        }

        .radar-grid {
            fill: none;
            stroke: #333;
            stroke-width: 1.5;
        }

        .stat-circle {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stat-node-group:hover .stat-circle {
            filter: drop-shadow(0 0 12px currentColor);
            transform: scale(1.15);
        }

        .stat-node-group:hover .stat-value {
            fill: white;
            font-size: 18px;
        }

        .radar-legend {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Attribute Cards Grid */
        .attributes-cards-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .attr-card {
            background: linear-gradient(135deg, rgba(20, 20, 25, 0.9) 0%, rgba(10, 10, 15, 0.9) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: visible;
            cursor: pointer;
        }

        .attr-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, transparent, currentColor, transparent);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px 12px 0 0;
        }

        .attr-card:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.6);
            border-color: currentColor;
            background: linear-gradient(135deg, rgba(30, 30, 35, 0.95) 0%, rgba(15, 15, 20, 0.95) 100%);
        }

        .attr-card:hover::before {
            opacity: 1;
        }

        .attr-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .attr-abbr {
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            opacity: 0.7;
            transition: all 0.3s;
        }

        .attr-card:hover .attr-abbr {
            opacity: 1;
            letter-spacing: 2px;
        }

        .attr-value {
            font-size: 2.5rem;
            font-weight: 800;
            font-family: var(--font-display);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1;
        }

        .attr-card:hover .attr-value {
            transform: scale(1.15);
            text-shadow: 0 0 20px currentColor;
        }

        .attr-card-body {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            gap: 0.75rem;
        }

        .attr-name {
            font-size: 1rem;
            color: #ccc;
            font-weight: 600;
            white-space: nowrap;
            overflow: visible;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .attr-card:hover .attr-name {
            color: white;
            font-weight: 700;
        }

        .attr-modifier {
            font-size: 1.4rem;
            font-weight: 700;
            font-family: var(--font-display);
            white-space: nowrap;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
        }

        .attr-card:hover .attr-modifier {
            transform: scale(1.2);
        }

        /* Individual attribute colors */
        .attr-str {
            color: #d90429;
            border-color: rgba(217, 4, 41, 0.3);
        }

        .attr-str:hover {
            border-color: #d90429;
            box-shadow: 0 8px 24px rgba(217, 4, 41, 0.3);
        }

        .attr-dex {
            color: #00b4d8;
            border-color: rgba(0, 180, 216, 0.3);
        }

        .attr-dex:hover {
            border-color: #00b4d8;
            box-shadow: 0 8px 24px rgba(0, 180, 216, 0.3);
        }

        .attr-con {
            color: #00ff00;
            border-color: rgba(0, 255, 0, 0.3);
        }

        .attr-con:hover {
            border-color: #00ff00;
            box-shadow: 0 8px 24px rgba(0, 255, 0, 0.3);
        }

        .attr-int {
            color: #9d4edd;
            border-color: rgba(157, 78, 221, 0.3);
        }

        .attr-int:hover {
            border-color: #9d4edd;
            box-shadow: 0 8px 24px rgba(157, 78, 221, 0.3);
        }

        .attr-wis {
            color: #ffaa00;
            border-color: rgba(255, 170, 0, 0.3);
        }

        .attr-wis:hover {
            border-color: #ffaa00;
            box-shadow: 0 8px 24px rgba(255, 170, 0, 0.3);
        }

        .attr-cha {
            color: #ff00ff;
            border-color: rgba(255, 0, 255, 0.3);
        }

        .attr-cha:hover {
            border-color: #ff00ff;
            box-shadow: 0 8px 24px rgba(255, 0, 255, 0.3);
        }

        /* 2. Premium Bars (Right Sidebar) */
        .premium-bar {
            position: relative;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 48px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .premium-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            transition: width 0.4s ease;
        }

        .bar-hp {
            background: linear-gradient(90deg, #990000, #d90429);
        }

        .bar-pe {
            background: linear-gradient(90deg, #005f73, #00b4d8);
        }

        .bar-text-val {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.2rem;
            text-shadow: 0 0 4px black;
            z-index: 2;
        }

        .bar-btn-group {
            position: absolute;
            top: 0;
            right: 0;
            height: 100%;
            display: flex;
            z-index: 5;
        }

        .bar-btn {
            background: rgba(0, 0, 0, 0.3);
            border: none;
            color: white;
            width: 24px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bar-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* 3. Skills List */
        .skill-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
            transition: background 0.2s;
            cursor: pointer;
        }

        .skill-row:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .skill-row.proficient {
            border-left: 3px solid var(--accent-purple);
            background: rgba(157, 78, 221, 0.05);
        }

        .custom-checkbox {
            width: 14px;
            height: 14px;
            border: 1px solid #555;
            margin-right: 10px;
            border-radius: 2px;
        }

        .custom-checkbox.checked {
            background: var(--accent-purple);
            border-color: var(--accent-purple);
        }

        .roll-btn-mini {
            background: #222;
            border: 1px solid #444;
            color: #888;
            border-radius: 4px;
            padding: 4px;
            cursor: pointer;
        }

        .d20-icon {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        /* 4. Attack Cards */
        .attack-card {
            background: #16161a;
            border: 1px solid #333;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.2s;
        }

        .attack-card:hover {
            border-color: var(--accent-red);
            transform: translateY(-2px);
        }

        .atk-header {
            padding: 10px;
            background: #111;
            border-bottom: 1px solid #222;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .atk-name {
            font-weight: bold;
            font-family: var(--font-display);
        }

        .atk-details {
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .roll-btn {
            background: none;
            border: 1px solid #444;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            padding: 5px;
        }

        .roll-btn:hover {
            background: var(--accent-red);
            border-color: var(--accent-red);
        }

        /* 5. Inventory */
        .inv-item-card {
            background: #111;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 5px;
            cursor: pointer;
        }

        .inv-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* --- INVENTORY LIST LAYOUT --- */
        .inv-workspace {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
            height: calc(100vh - 200px);
        }

        /* Left: List */
        .inv-list-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto;
            padding-right: 5px;
            margin-top: 20px;
        }

        .inv-row-card {
            background: #16161a;
            border: 1px solid #2a2a35;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            gap: 15px;
            align-items: center;
            position: relative;
        }

        .inv-row-card:hover {
            transform: translateX(5px);
            background: #1f1f25;
            border-color: #444;
        }

        .inv-row-card.selected {
            border-color: var(--accent-cyan);
            background: rgba(0, 180, 216, 0.05);
        }

        .inv-row-card.equipped {
            border-left: 3px solid var(--accent-cyan);
        }

        .inv-row-icon {
            width: 48px;
            height: 48px;
            background: #111;
            border-radius: 8px;
            border: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            flex-shrink: 0;
        }

        .inv-tags {
            margin-left: auto;
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .inv-tag {
            font-size: 0.65rem;
            padding: 2px 8px;
            border-radius: 4px;
            text-transform: uppercase;
            font-weight: bold;
            background: #222;
            color: #888;
            border: 1px solid #333;
        }

        .tag-rare {
            color: #00b4d8;
            border-color: rgba(0, 180, 216, 0.3);
            background: rgba(0, 180, 216, 0.1);
        }

        .tag-epic {
            color: #9d4edd;
            border-color: rgba(157, 78, 221, 0.3);
            background: rgba(157, 78, 221, 0.1);
        }

        /* Right: Details & Equip */
        .inv-panel {
            background: #121215;
            border: 1px solid #333;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .inv-hero {
            background: radial-gradient(circle at center, #1a1a2e 0%, #000 100%);
            padding: 2rem;
            text-align: center;
            border-bottom: 1px solid #222;
        }

        .inv-big-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            border: 2px solid var(--accent-cyan);
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(0, 180, 216, 0.3);
            color: var(--accent-cyan);
            font-size: 2.5rem;
        }

        .equip-slots-mini {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px;
            background: #0e0e12;
            border-bottom: 1px solid #222;
        }

        .es-mini {
            width: 32px;
            height: 32px;
            background: #1a1a20;
            border: 1px solid #333;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
        }

        .es-mini.active {
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
            background: rgba(0, 180, 216, 0.1);
            box-shadow: 0 0 10px rgba(0, 180, 216, 0.3);
        }

        /* === INVENTORY SYSTEM STYLES === */
        .inv-item-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 0;
            transition: all 0.2s;
            overflow: hidden;
        }

        .inv-item-card:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.15);
            transform: translateX(3px);
        }

        .inv-item-card.equipped {
            border-left: 3px solid var(--accent-cyan);
            background: rgba(0, 180, 216, 0.05);
        }

        .inv-item-card.selected {
            border-color: var(--accent-purple);
            box-shadow: 0 0 20px rgba(157, 78, 221, 0.3);
        }

        .inv-header {
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .inv-name {
            font-weight: 600;
            color: #e0e0e0;
            font-size: 0.95rem;
            margin-bottom: 2px;
        }

        .inv-mini-stat {
            font-size: 0.75rem;
            color: #777;
        }

        .inv-details {
            display: none;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            animation: slideDown 0.2s ease;
        }

        .inv-details.expanded {
            display: block;
        }

        .inv-action-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
            font-family: var(--font-main);
        }

        .inv-action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .inv-action-btn.equipped {
            background: rgba(0, 180, 216, 0.2);
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
        }

        .inv-action-btn.danger {
            color: #ff6b6b;
        }

        .inv-action-btn.danger:hover {
            background: rgba(255, 107, 107, 0.2);
            border-color: #ff6b6b;
        }

        .inv-row-icon {
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            flex-shrink: 0;
        }

        .inv-tag {
            font-size: 0.65rem;
            padding: 3px 8px;
            border-radius: 4px;
            text-transform: uppercase;
            font-weight: bold;
            background: #222;
            color: #888;
            border: 1px solid #333;
        }

        .tag-rare {
            color: var(--accent-cyan);
            border-color: rgba(0, 180, 216, 0.3);
            background: rgba(0, 180, 216, 0.15);
        }

        .inv-search {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-family: var(--font-main);
            transition: all 0.3s;
        }

        .inv-search:focus {
            outline: none;
            border-color: var(--accent-purple);
            background: rgba(0, 0, 0, 0.5);
            box-shadow: 0 0 15px rgba(157, 78, 221, 0.2);
        }

        .filter-tag {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            color: #888;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid transparent;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .filter-tag:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        .filter-tag.active {
            background: var(--accent-purple);
            color: white;
            box-shadow: 0 4px 10px rgba(157, 78, 221, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .capacity-bar-container {
            height: 6px;
            background: #222;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .capacity-fill {
            height: 100%;
            background: linear-gradient(90deg, #555, #888);
            border-radius: 3px;
            transition: all 0.5s ease;
        }

        .inv-toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 1rem;
        }

        .inv-filters {
            display: flex;
            gap: 8px;
            margin-bottom: 1rem;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .inv-library {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(10, 10, 14, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .inv-list-container {
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .inv-panel {
            width: 300px;
            background: rgba(0, 0, 0, 0.2);
            border-left: 1px solid rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .equip-slots-mini {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        .es-mini {
            width: 40px;
            height: 40px;
            background: #111;
            border: 1px solid #333;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
            transition: all 0.3s;
        }

        .es-mini.equipped {
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
            background: rgba(0, 180, 216, 0.1);
            box-shadow: 0 0 15px rgba(0, 180, 216, 0.3);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* === TECHNIQUES SYSTEM === */
        .techniques-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .technique-card {
            background: linear-gradient(135deg, rgba(157, 78, 221, 0.05) 0%, rgba(0, 0, 0, 0.2) 100%);
            border: 1px solid rgba(157, 78, 221, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .technique-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-purple), var(--accent-cyan));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .technique-card:hover {
            transform: translateY(-4px);
            border-color: var(--accent-purple);
            box-shadow: 0 8px 24px rgba(157, 78, 221, 0.3);
        }

        .technique-card:hover::before {
            opacity: 1;
        }

        .technique-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .technique-name {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            margin: 0 0 0.5rem 0;
        }

        .technique-cost {
            background: rgba(0, 180, 216, 0.2);
            border: 1px solid var(--accent-cyan);
            color: var(--accent-cyan);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            white-space: nowrap;
        }

        .technique-type {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            color: #aaa;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .technique-desc {
            color: #ccc;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .technique-actions {
            display: flex;
            gap: 8px;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .technique-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .technique-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .technique-btn.primary {
            background: var(--accent-purple);
            border-color: var(--accent-purple);
        }

        .technique-btn.primary:hover {
            background: rgba(157, 78, 221, 0.8);
        }

        .technique-btn.danger {
            color: #ff6b6b;
        }

        .technique-btn.danger:hover {
            background: rgba(255, 107, 107, 0.2);
            border-color: #ff6b6b;
        }

        /* === BREATHING SYSTEM === */
        .breathing-container {
            position: relative;
        }

        .breathing-locked {
            position: relative;
            filter: blur(4px);
            pointer-events: none;
            user-select: none;
        }

        .breathing-lock-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            background: rgba(0, 0, 0, 0.9);
            padding: 2rem 3rem;
            border-radius: 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .breathing-lock-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            color: #666;
        }

        .breathing-lock-text {
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
        }

        .breathing-lock-subtext {
            font-size: 0.9rem;
            color: #888;
        }

        .breathing-card {
            background: linear-gradient(135deg, rgba(0, 180, 216, 0.05) 0%, rgba(0, 0, 0, 0.2) 100%);
            border: 1px solid rgba(0, 180, 216, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .breathing-card:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 4px 20px rgba(0, 180, 216, 0.2);
        }

        .breathing-name {
            font-family: var(--font-display);
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent-cyan);
            margin-bottom: 0.5rem;
        }

        .breathing-desc {
            color: #ccc;
            line-height: 1.6;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #666;
        }

        .empty-state-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            opacity: 0.5;
        }

        .empty-state-text {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .empty-state-subtext {
            font-size: 0.9rem;
            color: #555;
        }

        /* === COMBAT SYSTEM === */
        .attack-card {
            background: linear-gradient(135deg, rgba(217, 4, 41, 0.05) 0%, rgba(0, 0, 0, 0.2) 100%);
            border: 1px solid rgba(217, 4, 41, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .attack-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-red), var(--accent-purple));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .attack-card:hover {
            transform: translateY(-4px);
            border-color: var(--accent-red);
            box-shadow: 0 8px 24px rgba(217, 4, 41, 0.3);
        }

        .attack-card:hover::before {
            opacity: 1;
        }

        .attack-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .attack-name {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            margin: 0;
        }

        .attack-bonus {
            background: rgba(0, 180, 216, 0.2);
            border: 1px solid var(--accent-cyan);
            color: var(--accent-cyan);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .attack-damage {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--accent-red);
            margin-bottom: 0.5rem;
        }

        .attack-type {
            font-size: 0.85rem;
            color: #888;
            margin-bottom: 1rem;
        }

        .attack-actions {
            display: flex;
            gap: 8px;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .attack-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .attack-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .attack-btn.primary {
            background: var(--accent-red);
            border-color: var(--accent-red);
            flex: 2;
        }

        .attack-btn.primary:hover {
            background: rgba(217, 4, 41, 0.8);
            box-shadow: 0 4px 12px rgba(217, 4, 41, 0.4);
        }

        .attack-btn.danger {
            color: #ff6b6b;
            flex: 0.5;
        }

        .attack-btn.danger:hover {
            background: rgba(255, 107, 107, 0.2);
            border-color: #ff6b6b;
        }

        /* === 3D DICE ANIMATION === */
        .dice-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .dice-overlay.active {
            opacity: 1;
        }

        .dice-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .dice-3d {
            width: 120px;
            height: 120px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.1s;
        }

        .dice-3d.rolling {
            animation: rollDice 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes rollDice {
            0% {
                transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
            }

            25% {
                transform: rotateX(360deg) rotateY(180deg) rotateZ(90deg);
            }

            50% {
                transform: rotateX(720deg) rotateY(360deg) rotateZ(180deg);
            }

            75% {
                transform: rotateX(1080deg) rotateY(540deg) rotateZ(270deg);
            }

            100% {
                transform: rotateX(1440deg) rotateY(720deg) rotateZ(360deg);
            }
        }

        .dice-face {
            position: absolute;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            border: 3px solid var(--accent-cyan);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 800;
            color: var(--accent-cyan);
            box-shadow: 0 0 20px rgba(0, 180, 216, 0.5);
        }

        .dice-front {
            transform: rotateY(0deg) translateZ(60px);
        }

        .dice-back {
            transform: rotateY(180deg) translateZ(60px);
        }

        .dice-right {
            transform: rotateY(90deg) translateZ(60px);
        }

        .dice-left {
            transform: rotateY(-90deg) translateZ(60px);
        }

        .dice-top {
            transform: rotateX(90deg) translateZ(60px);
        }

        .dice-bottom {
            transform: rotateX(-90deg) translateZ(60px);
        }

        .dice-result-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            text-align: center;
            transition: all 0.3s;
        }

        /* Attack Results */
        .floating-result {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            z-index: 2500;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .floating-result.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .attack-result-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            border: 2px solid var(--accent-red);
            border-radius: 16px;
            padding: 2rem;
            min-width: 350px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 40px rgba(217, 4, 41, 0.4);
        }

        .attack-result-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: white;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .attack-result-body {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.1rem;
        }

        .result-row span:first-child {
            color: #888;
        }

        .result-value {
            font-weight: 700;
            font-size: 1.3rem;
            color: white;
        }

        .result-value.critical {
            color: var(--accent-cyan);
            text-shadow: 0 0 10px var(--accent-cyan);
        }

        .result-value.fumble {
            color: #ff6b6b;
        }

        .result-value.damage {
            color: var(--accent-red);
        }

        .critical-hit {
            background: linear-gradient(90deg, rgba(0, 180, 216, 0.2), rgba(0, 180, 216, 0.05));
            border-left: 3px solid var(--accent-cyan);
            padding: 0.75rem;
            border-radius: 6px;
            color: var(--accent-cyan);
            font-weight: 700;
            text-align: center;
            animation: pulse 0.5s ease-in-out infinite alternate;
        }

        .fumble-hit {
            background: linear-gradient(90deg, rgba(255, 107, 107, 0.2), rgba(255, 107, 107, 0.05));
            border-left: 3px solid #ff6b6b;
            padding: 0.75rem;
            border-radius: 6px;
            color: #ff6b6b;
            font-weight: 700;
            text-align: center;
        }

        @keyframes pulse {
            from {
                opacity: 0.8;
            }

            to {
                opacity: 1;
            }
        }

        /* === SKILLS SYSTEM === */
        .skill-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            transition: all 0.2s;
        }

        .skill-row:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .skill-row.proficient {
            background: linear-gradient(90deg, rgba(157, 78, 221, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%);
            border-left: 3px solid var(--accent-purple);
        }

        .skill-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .skill-prof-indicator {
            cursor: pointer;
            color: #666;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .skill-prof-indicator:hover {
            color: var(--accent-purple);
            transform: scale(1.2);
        }

        .skill-row.proficient .skill-prof-indicator {
            color: var(--accent-purple);
        }

        .skill-details {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .skill-name {
            font-weight: 600;
            color: #e0e0e0;
            font-size: 0.95rem;
        }

        .skill-attr {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.8;
        }

        .skill-bonus {
            font-size: 1.1rem;
            font-weight: 700;
            font-family: var(--font-display);
            min-width: 40px;
            text-align: center;
        }

        .skill-roll-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .skill-roll-btn:hover {
            background: var(--accent-cyan);
            border-color: var(--accent-cyan);
            transform: translateY(-2px) rotate(15deg);
            box-shadow: 0 4px 12px rgba(0, 180, 216, 0.4);
        }

        .skill-result-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            border: 2px solid var(--accent-cyan);
            border-radius: 16px;
            padding: 2rem;
            min-width: 350px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 40px rgba(0, 180, 216, 0.4);
        }

        .skill-result-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: white;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .skill-result-body {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .result-row.total {
            padding-top: 1rem;
            border-top: 2px solid rgba(255, 255, 255, 0.1);
            margin-top: 0.5rem;
        }

        /* === ATTACK MODAL === */
        .attack-modal {
            background: linear-gradient(135deg, #141419 0%, #0e0e12 100%);
            border: 1px solid rgba(217, 4, 41, 0.3);
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 40px rgba(217, 4, 41, 0.2);
            animation: modalSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .attack-form {
            padding: 2rem;
            overflow-y: auto;
            flex: 1;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-size: 0.85rem;
            font-weight: 600;
            color: #ccc;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .form-input,
        .form-select,
        .form-textarea {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            color: white;
            font-family: var(--font-main);
            font-size: 1rem;
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent-red);
            background: rgba(0, 0, 0, 0.6);
            box-shadow: 0 0 15px rgba(217, 4, 41, 0.2);
        }

        .form-select {
            cursor: pointer;
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .modal-footer {
            display: flex;
            gap: 1rem;
            padding: 1.5rem 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.3);
        }

        .modal-btn-primary,
        .modal-btn-secondary {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-family: var(--font-main);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: none;
        }

        .modal-btn-primary {
            background: linear-gradient(90deg, var(--accent-red), var(--accent-purple));
            color: white;
            box-shadow: 0 4px 15px rgba(217, 4, 41, 0.3);
        }

        .modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(217, 4, 41, 0.5);
        }

        .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #ccc;
        }

        .modal-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* === PREMIUM ADD BUTTONS === */
        .add-btn {
            margin-left: auto;
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            color: white;
            font-family: var(--font-main);
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .add-btn:active {
            transform: translateY(0);
        }

        .add-btn-combat {
            background: linear-gradient(90deg, var(--accent-red), #c1121f);
            box-shadow: 0 4px 15px rgba(217, 4, 41, 0.4);
        }

        .add-btn-combat:hover {
            box-shadow: 0 6px 20px rgba(217, 4, 41, 0.6);
        }

        .add-btn-inventory {
            background: linear-gradient(90deg, var(--accent-purple), #7b2cbf);
            box-shadow: 0 4px 15px rgba(157, 78, 221, 0.4);
        }

        .add-btn-inventory:hover {
            box-shadow: 0 6px 20px rgba(157, 78, 221, 0.6);
        }

        .add-btn-technique {
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-cyan));
            box-shadow: 0 4px 15px rgba(157, 78, 221, 0.4);
        }

        .add-btn-technique:hover {
            box-shadow: 0 6px 20px rgba(0, 180, 216, 0.6);
        }

        /* === PREMIUM MODAL SYSTEM (Items & General) === */
        .premium-modal {
            background: linear-gradient(135deg, #141419 0%, #0e0e12 100%);
            border: 1px solid rgba(157, 78, 221, 0.3);
            border-radius: 16px;
            width: 90%;
            max-width: 900px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 40px rgba(157, 78, 221, 0.2);
            animation: modalSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .modal-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.3);
        }

        .modal-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }

        .modal-content-area {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        .modal-search-bar {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .modal-search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 45px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            font-family: var(--font-main);
            font-size: 1rem;
            transition: all 0.2s;
        }

        .modal-search-input:focus {
            outline: none;
            border-color: var(--accent-purple);
            background: rgba(0, 0, 0, 0.6);
        }

        .modal-cats {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .cat-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #888;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-family: var(--font-main);
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .cat-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .cat-btn.active {
            background: var(--accent-purple);
            border-color: var(--accent-purple);
            color: white;
        }

        .modal-picker {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .picker-item-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .picker-item-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(157, 78, 221, 0.3);
        }

        .picker-item-icon {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .picker-item-name {
            font-weight: 600;
            color: white;
            margin-bottom: 0.25rem;
            text-align: center;
        }

        .picker-item-stat {
            color: var(--accent-cyan);
            font-weight: 700;
            text-align: center;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .picker-item-desc {
            color: #888;
            font-size: 0.75rem;
            text-align: center;
        }

        /* 6. Grid Layouts */
        .overview-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        /* Utilities */
        .ds-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #333;
            color: white;
            padding: 8px;
            border-radius: 4px;
            width: 100%;
            font-family: inherit;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Portrait & Info */
        .char-portrait {
            width: 100%;
            aspect-ratio: 1;
            background: #000;
            border: 2px solid var(--accent-red);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #333;
            overflow: hidden;
            position: relative;
        }

        .char-portrait img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .char-info-block {
            text-align: center;
            margin-bottom: 2rem;
        }

        .vital-box {
            background: #16161a;
            border: 1px solid #333;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .def-row {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #ccc;
            margin-bottom: 5px;
        }

        /* Roll Log */
        .roll-log {
            position: fixed;
            bottom: 20px;
            left: 280px;
            width: 300px;
            max-height: 200px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 5px;
            pointer-events: none;
            z-index: 100;
        }

        .chat-msg {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #333;
            color: white;
            padding: 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            pointer-events: auto;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from {
                transform: translateX(-20px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* === PREMIUM MODAL SYSTEM === */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s ease;
        }

        .premium-modal {
            background: linear-gradient(135deg, #141419 0%, #0e0e12 100%);
            border: 1px solid rgba(157, 78, 221, 0.3);
            border-radius: 16px;
            width: 90%;
            max-width: 900px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 40px rgba(157, 78, 221, 0.2);
            animation: modalSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes modalSlideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-top {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
        }

        .modal-title {
            margin: 0;
            font-family: var(--font-display);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--accent-red);
            border-color: var(--accent-red);
            transform: rotate(90deg);
        }

        .modal-content-area {
            flex: 1;
            padding: 1.5rem 2rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .modal-search-bar {
            position: relative;
            width: 100%;
        }

        .modal-search-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 12px 12px 12px 45px;
            border-radius: 8px;
            font-family: var(--font-main);
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        .modal-search-input:focus {
            outline: none;
            border-color: var(--accent-purple);
            background: rgba(0, 0, 0, 0.6);
            box-shadow: 0 0 20px rgba(157, 78, 221, 0.2);
        }

        .modal-cats {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .cat-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #888;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-family: var(--font-main);
        }

        .cat-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transform: translateY(-2px);
        }

        .cat-btn.active {
            background: var(--accent-purple);
            border-color: var(--accent-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(157, 78, 221, 0.4);
        }

        .modal-picker {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            max-height: 400px;
            overflow-y: auto;
            padding: 5px;
        }

        .picker-item-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .picker-item-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent-cyan);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 180, 216, 0.2);
        }

        .picker-item-icon {
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .picker-item-name {
            font-weight: 600;
            color: white;
            font-size: 0.9rem;
            text-align: center;
        }

        .picker-item-stat {
            font-size: 0.75rem;
            color: var(--accent-cyan);
            text-align: center;
            font-weight: bold;
        }

        .picker-item-desc {
            font-size: 0.7rem;
            color: #888;
            text-align: center;
            line-height: 1.3;
        }

        .modal-footer {
            padding: 1rem 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.3);
        }

        .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .modal-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .modal-overlay.open {
            display: flex !important;
        }

        /* MOBILE OPTIMIZATIONS */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
                overflow: hidden;
                /* Prevent body scroll, sections scroll */
                height: 100vh;
                background: var(--bg-dark);
            }

            /* Fixed Sidebars hidden by default */
            .sidebar-left {
                position: fixed;
                left: -100%;
                top: 0;
                bottom: 0;
                width: 85%;
                box-shadow: 10px 0 30px rgba(0, 0, 0, 0.5);
                transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 1000;
                height: 100vh;
            }

            .sidebar-left.open {
                left: 0;
            }

            .sidebar-right {
                position: fixed;
                right: -100%;
                top: 0;
                bottom: 0;
                width: 85%;
                box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
                transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 1000;
                border-left: 1px solid var(--border-color);
                height: 100vh;
                padding-top: 60px;
                /* Space for header if z-index is lower, but sidebar is 1000 */
                padding-bottom: 80px;
            }

            .sidebar-right.open {
                right: 0;
            }

            /* Main Content adjustments */
            .main-content {
                padding: 5rem 1rem 5rem 1rem;
                /* Top padding for header, Bottom for nav */
                overflow-y: auto;
                width: 100%;
                flex: 1;
                /* Take remaining height */
                margin-bottom: 60px;
                /* Space for bottom nav */
            }

            /* Mobile Header */
            .mobile-header {
                display: flex !important;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 60px;
                background: rgba(10, 10, 15, 0.95);
                backdrop-filter: blur(10px);
                border-bottom: 1px solid var(--border-color);
                z-index: 900;
                align-items: center;
                justify-content: space-between;
                padding: 0 1rem;
            }

            .mobile-header-title {
                font-family: var(--font-display);
                font-weight: 700;
                font-size: 1.1rem;
                letter-spacing: 1px;
            }

            /* Mobile Bottom Nav */
            .mobile-nav-bar {
                display: flex !important;
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 60px;
                background: #0e0e12;
                border-top: 1px solid var(--border-color);
                z-index: 900;
                justify-content: space-around;
                align-items: center;
                padding-bottom: env(safe-area-inset-bottom);
            }

            .mobile-nav-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 4px;
                font-size: 0.7rem;
                color: var(--text-muted);
                background: none;
                border: none;
                width: 100%;
                height: 100%;
            }

            .mobile-nav-item.active {
                color: var(--accent-red);
            }

            /* Inventory & Components Fixes */
            .inv-header {
                flex-direction: column;
                gap: 1rem;
            }

            .inv-header .inv-workspace {
                display: flex;
                flex-direction: column;
                height: auto;
            }

            .inv-panel {
                order: -1;
                /* Show hero/stats on top in inventory */
                margin-bottom: 1rem;
            }

            .char-portrait {
                width: 120px;
                margin: 0 auto;
            }

            /* Overview Stats Grid */
            .overview-grid {
                grid-template-columns: 1fr;
                /* Stack columns */
                gap: 1.5rem;
            }

            .roll-log {
                left: 10px;
                bottom: 70px;
                /* Above nav bar */
                width: calc(100% - 20px);
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .page-title {
                font-size: 2rem;
            }
        }

        /* Base styles for mobile elements (hidden on desktop) */
        .mobile-header,
        .mobile-nav-bar {
            display: none;
        }

        .mobile-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            backdrop-filter: blur(2px);
        }

        .mobile-overlay.open {
            opacity: 1;
            pointer-events: all;
        }
    </style>
</head>

<body>

    <!-- LEFT SIDEBAR -->
    <nav class="sidebar-left">
        <div class="app-logo">
            <i data-lucide="flame" style="color: var(--accent-red);"></i> Demon Slayer
        </div>

        <div class="nav-steps">
            <div
                style="font-size: 0.7rem; text-transform: uppercase; color: #555; font-weight: 700; letter-spacing: 1px; margin-bottom: 5px;">
                Menu Principal</div>

            <a href="#" class="nav-item active" onclick="showSection('overview'); return false;">
                <i data-lucide="layout-dashboard" class="nav-icon"></i>
                <span>Viso Geral</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('combat'); return false;">
                <i data-lucide="sword" class="nav-icon"></i>
                <span>Combate</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('inventory'); return false;">
                <i data-lucide="backpack" class="nav-icon"></i>
                <span>Inventrio</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('abilities'); return false;">
                <i data-lucide="zap" class="nav-icon"></i>
                <span>Tcnicas</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('bio'); return false;">
                <i data-lucide="scroll" class="nav-icon"></i>
                <span>Biografia</span>
            </a>
        </div>

        <div style="margin-top: auto;">
            <a href="index.html" class="nav-item" style="color: #666;">
                <i data-lucide="log-out" class="nav-icon"></i>
                <span>Sair</span>
            </a>
        </div>
    </nav>

    <!-- RIGHT SIDEBAR (Summary) -->
    <aside class="sidebar-right">
        <!-- Portrait -->
        <div class="char-portrait" id="charPortraitContainer">
            <i data-lucide="user"></i>
        </div>

        <div class="char-info-block">
            <h2 id="dispName" style="margin: 10px 0 5px 0; font-family: var(--font-display);">Sem Nome</h2>
            <div style="color: var(--accent-cyan); font-size: 0.9rem; font-weight: 600;" id="dispRank">Rank</div>
            <div style="color: #666; font-size: 0.8rem; margin-top: 5px;" id="dispClass">Classe</div>
        </div>

        <!-- Vital Bars -->
        <div>
            <div
                style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #888; margin-bottom: 4px;">
                <span>VIDA (HP)</span>
                <div>Max: <input type="number" id="hpMaxInput" class="ds-input"
                        style="width: 50px; padding: 0; background:none; border:none; text-align:right;" value="20"
                        onchange="updateMaxStats()"></div>
            </div>
            <div class="premium-bar bar-hp">
                <div class="premium-fill bar-hp" id="hpFill" style="width: 100%;"></div>
                <div class="bar-text-val">
                    <span id="hpCurrent">20</span> <span style="font-size: 0.8rem; opacity: 0.7; margin-left: 4px;"> /
                        <span id="hpPercent">100%</span></span>
                </div>
                <div class="bar-btn-group">
                    <button class="bar-btn" onclick="modHP(-1)">-</button>
                    <button class="bar-btn" onclick="modHP(1)">+</button>
                </div>
            </div>

            <div
                style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #888; margin-bottom: 4px; margin-top: 15px;">
                <span>VIGOR (PE)</span>
                <div>Max: <input type="number" id="peMaxInput" class="ds-input"
                        style="width: 50px; padding: 0; background:none; border:none; text-align:right;" value="5"
                        onchange="updateMaxStats()"></div>
            </div>
            <div class="premium-bar bar-pe">
                <div class="premium-fill bar-pe" id="peFill" style="width: 100%;"></div>
                <div class="bar-text-val">
                    <span id="peCurrent">5</span> <span style="font-size: 0.8rem; opacity: 0.7; margin-left: 4px;"> /
                        <span id="pePercent">100%</span></span>
                </div>
                <div class="bar-btn-group">
                    <button class="bar-btn" onclick="modPE(-1)">-</button>
                    <button class="bar-btn" onclick="modPE(1)">+</button>
                </div>
            </div>
        </div>

        <!-- Defense -->
        <div class="vital-box" style="margin-top: 1rem;">
            <div
                style="font-size: 0.8rem; color: var(--accent-purple); font-weight: 700; margin-bottom: 10px; text-transform: uppercase;">
                Defesa</div>
            <div class="def-row">
                <span>Classe de Armadura (CA)</span>
                <span style="color: white; font-weight: bold;" id="val-ac">10</span>
            </div>
            <div class="def-row">
                <span>Reduo de Dano</span>
                <span style="color: white; font-weight: bold;" id="def-other">0</span>
            </div>
            <div class="def-row">
                <span>Iniciativa</span>
                <span style="color: white; font-weight: bold;" id="val-init">+0</span>
            </div>
        </div>

        <button onclick="saveState(); alert('Salvo!');"
            style="background: var(--accent-purple); color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: bold; margin-top: auto;">
            Salvar Progresso
        </button>

    </aside>

    <!-- CONTENT AREA -->
    <main class="main-content">

        <header class="page-header">
            <div>
                <div class="breadcrumbs">Demon Slayer RPG</div>
                <h1 class="page-title">Ficha do Caador</h1>
                <p class="page-subtitle">Gerencie seus atributos, habilidades e equipamentos.</p>
            </div>
            <!-- Hidden inputs relied on by script -->
            <input type="hidden" id="levelInput" value="1">
            <input type="hidden" id="xpInput" value="0">
        </header>

        <!-- SECTION 1: OVERVIEW (ENHANCED ATTRIBUTES) -->
        <section id="overview" class="dashboard-section">
            <div class="section-header">
                <i data-lucide="layout-dashboard" style="color: var(--accent-red);"></i>
                <span class="sec-title">Atributos e Percias</span>
            </div>

            <div class="overview-grid">
                <!-- COL 1: ENHANCED ATTRIBUTES -->
                <div class="attributes-section">
                    <!-- Radar Chart Container -->
                    <div class="radar-chart-wrapper">
                        <div class="attributes-container" id="radarContainer">
                            <svg class="stat-svg" viewBox="0 0 200 200">
                                <!-- Grid Background -->
                                <polygon points="100,20 170,60 170,140 100,180 30,140 30,60" class="radar-grid"
                                    style="opacity:0.3"></polygon>
                                <polygon points="100,40 152,70 152,130 100,160 48,130 48,70" class="radar-grid"
                                    style="opacity:0.2"></polygon>
                                <polygon points="100,60 135,80 135,120 100,140 65,120 65,80" class="radar-grid"
                                    style="opacity:0.1"></polygon>

                                <!-- The Chart Polygon -->
                                <polygon id="radarPoly" points="100,100 100,100 100,100 100,100 100,100 100,100"
                                    class="radar-poly"></polygon>

                                <!-- Interactive Nodes -->
                                <!-- STR (Top) -->
                                <g onclick="rollStat('str')" style="cursor:pointer" class="stat-node-group">
                                    <circle cx="100" cy="20" r="18" fill="#111" stroke="#d90429" stroke-width="2.5"
                                        class="stat-circle" />
                                    <text x="100" y="26" class="stat-label-text stat-value" id="svg-str">10</text>
                                    <text x="100" y="4" class="stat-label-text stat-abbr"
                                        style="font-size:10px; fill:#d90429; font-weight:bold;">FOR</text>
                                </g>

                                <!-- DEX (Top Right) -->
                                <g onclick="rollStat('dex')" style="cursor:pointer" class="stat-node-group">
                                    <circle cx="170" cy="60" r="18" fill="#111" stroke="#00b4d8" stroke-width="2.5"
                                        class="stat-circle" />
                                    <text x="170" y="66" class="stat-label-text stat-value" id="svg-dex">10</text>
                                    <text x="188" y="58" class="stat-label-text stat-abbr"
                                        style="font-size:10px; fill:#00b4d8; text-anchor:start; font-weight:bold;">AGI</text>
                                </g>

                                <!-- CON (Bottom Right) -->
                                <g onclick="rollStat('con')" style="cursor:pointer" class="stat-node-group">
                                    <circle cx="170" cy="140" r="18" fill="#111" stroke="#00ff00" stroke-width="2.5"
                                        class="stat-circle" />
                                    <text x="170" y="146" class="stat-label-text stat-value" id="svg-con">10</text>
                                    <text x="188" y="152" class="stat-label-text stat-abbr"
                                        style="font-size:10px; fill:#00ff00; text-anchor:start; font-weight:bold;">VIG</text>
                                </g>

                                <!-- INT (Bottom) -->
                                <g onclick="rollStat('int')" style="cursor:pointer" class="stat-node-group">
                                    <circle cx="100" cy="180" r="18" fill="#111" stroke="#9d4edd" stroke-width="2.5"
                                        class="stat-circle" />
                                    <text x="100" y="186" class="stat-label-text stat-value" id="svg-int">10</text>
                                    <text x="100" y="208" class="stat-label-text stat-abbr"
                                        style="font-size:10px; fill:#9d4edd; font-weight:bold;">INT</text>
                                </g>

                                <!-- WIS (Bottom Left) -->
                                <g onclick="rollStat('wis')" style="cursor:pointer" class="stat-node-group">
                                    <circle cx="30" cy="140" r="18" fill="#111" stroke="#ffaa00" stroke-width="2.5"
                                        class="stat-circle" />
                                    <text x="30" y="146" class="stat-label-text stat-value" id="svg-wis">10</text>
                                    <text x="12" y="152" class="stat-label-text stat-abbr"
                                        style="font-size:10px; fill:#ffaa00; text-anchor:end; font-weight:bold;">PRE</text>
                                </g>

                                <!-- CHA (Top Left) -->
                                <g onclick="rollStat('cha')" style="cursor:pointer" class="stat-node-group">
                                    <circle cx="30" cy="60" r="18" fill="#111" stroke="#ff00ff" stroke-width="2.5"
                                        class="stat-circle" />
                                    <text x="30" y="66" class="stat-label-text stat-value" id="svg-cha">10</text>
                                    <text x="12" y="58" class="stat-label-text stat-abbr"
                                        style="font-size:10px; fill:#ff00ff; text-anchor:end; font-weight:bold;">CAR</text>
                                </g>
                            </svg>
                        </div>

                        <!-- Legend/Info -->
                        <div class="radar-legend">
                            <div class="legend-item">
                                <i data-lucide="info" style="width:14px; color:#666;"></i>
                                <span style="font-size:0.85rem; color:#888;">Clique nos atributos para rolar
                                    dados</span>
                            </div>
                        </div>
                    </div>

                    <!-- Attribute Cards Grid -->
                    <div class="attributes-cards-grid">
                        <div class="attr-card attr-str">
                            <div class="attr-card-header">
                                <span class="attr-abbr">FOR</span>
                                <span class="attr-value" id="card-str">10</span>
                            </div>
                            <div class="attr-card-body">
                                <div class="attr-name">Fora</div>
                                <div class="attr-modifier" id="mod-str">+0</div>
                            </div>
                        </div>

                        <div class="attr-card attr-dex">
                            <div class="attr-card-header">
                                <span class="attr-abbr">AGI</span>
                                <span class="attr-value" id="card-dex">10</span>
                            </div>
                            <div class="attr-card-body">
                                <div class="attr-name">Agilidade</div>
                                <div class="attr-modifier" id="mod-dex">+0</div>
                            </div>
                        </div>

                        <div class="attr-card attr-con">
                            <div class="attr-card-header">
                                <span class="attr-abbr">VIG</span>
                                <span class="attr-value" id="card-con">10</span>
                            </div>
                            <div class="attr-card-body">
                                <div class="attr-name">Vigor</div>
                                <div class="attr-modifier" id="mod-con">+0</div>
                            </div>
                        </div>

                        <div class="attr-card attr-int">
                            <div class="attr-card-header">
                                <span class="attr-abbr">INT</span>
                                <span class="attr-value" id="card-int">10</span>
                            </div>
                            <div class="attr-card-body">
                                <div class="attr-name">Inteligncia</div>
                                <div class="attr-modifier" id="mod-int">+0</div>
                            </div>
                        </div>

                        <div class="attr-card attr-wis">
                            <div class="attr-card-header">
                                <span class="attr-abbr">PRE</span>
                                <span class="attr-value" id="card-wis">10</span>
                            </div>
                            <div class="attr-card-body">
                                <div class="attr-name">Percepo</div>
                                <div class="attr-modifier" id="mod-wis">+0</div>
                            </div>
                        </div>

                        <div class="attr-card attr-cha">
                            <div class="attr-card-header">
                                <span class="attr-abbr">CAR</span>
                                <span class="attr-value" id="card-cha">10</span>
                            </div>
                            <div class="attr-card-body">
                                <div class="attr-name">Carisma</div>
                                <div class="attr-modifier" id="mod-cha">+0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- COL 2: SKILLS -->
                <div>
                    <h3
                        style="color: white; border-bottom: 2px solid var(--accent-purple); padding-bottom: 0.5rem; margin-top:0;">
                        Percias
                    </h3>
                    <div id="skillsListBody" style="display: flex; flex-direction: column; gap: 0;">
                        <!-- Injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: COMBAT -->
        <section id="combat" class="dashboard-section">
            <div class="section-header">
                <i data-lucide="sword" style="color: var(--accent-red);"></i>
                <span class="sec-title">Combate</span>
                <button onclick="openAttackModal()" class="add-btn add-btn-combat">
                    <i data-lucide="plus" style="width:16px;"></i>
                    Adicionar Ataque
                </button>
            </div>

            <div id="attacksList"
                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
                <!-- Attacks Injected Here -->
            </div>
        </section>

        <!-- SECTION 3: INVENTORY (REVAMPED) -->
        <section id="inventory" class="dashboard-section">
            <div class="section-header">
                <i data-lucide="backpack" style="color: var(--accent-red);"></i>
                <span class="sec-title">Inventrio</span>
                <button onclick="openItemModal()" class="add-btn add-btn-inventory">
                    <i data-lucide="plus" style="width:16px;"></i>
                    Adicionar Item
                </button>
            </div>

            <div class="inv-workspace">
                <!-- COL 1: LIBRARY -->
                <div class="inv-library">
                    <!-- Search & Filters -->
                    <div class="inv-toolbar">
                        <div style="position:relative; flex:1;">
                            <i data-lucide="search"
                                style="position:absolute; left:10px; top:10px; color:#666; width:16px;"></i>
                            <input type="text" class="inv-search" placeholder="Buscar item..."
                                style="padding-left:35px;" oninput="filterInventory(this.value)">
                        </div>
                        <button
                            style="background:#222; border:1px solid #333; width:40px; height:40px; border-radius:8px; cursor:pointer; color:#888;"><i
                                data-lucide="sliders-horizontal"></i></button>
                    </div>

                    <div class="inv-filters">
                        <div class="filter-tag active" onclick="setFilter('all', this)">TUDO</div>
                        <div class="filter-tag" onclick="setFilter('weapon', this)">ARMAS</div>
                        <div class="filter-tag" onclick="setFilter('armor', this)">EQUIPAMENTOS</div>
                        <div class="filter-tag" onclick="setFilter('consumable', this)">CONSUMVEIS</div>
                    </div>

                    <div
                        style="font-size:0.75rem; color:#666; margin-top:5px; display:flex; justify-content:space-between;">
                        <span>CAPACIDADE DA MOCHILA</span>
                        <span id="capacityText">14 / 50 kg</span>
                    </div>
                    <div class="capacity-bar-container">
                        <div class="capacity-fill" id="capacityBar" style="width: 25%;"></div>
                    </div>

                    <!-- LIST (Matched to Abilities) -->
                    <div class="inv-list-container" id="inventoryGrid">
                        <!-- Items Loaded Here (Rows) -->
                    </div>
                </div>

                <!-- COL 2: PANEL -->
                <aside class="inv-panel">
                    <!-- Mini Paper Doll (Always Visible) -->
                    <div class="equip-slots-mini">
                        <div class="es-mini" id="slot-head" title="Cabea"><i data-lucide="smile"></i></div>
                        <div class="es-mini" id="slot-torso" title="Tronco"><i data-lucide="shirt"></i></div>
                        <div class="es-mini" id="slot-hands" title="Mos"><i data-lucide="hand"></i></div>
                        <div class="es-mini" id="slot-weapon" title="Arma"><i data-lucide="sword"></i></div>
                        <div class="es-mini" id="slot-legs" title="Pernas"><i data-lucide="footprints"></i></div>
                    </div>

                    <!-- SELECTED ITEM DETAILS -->
                    <div id="itemDetailContainer" style="display:none; flex-direction:column; flex:1;">
                        <!-- Populated by JS -->
                    </div>

                    <!-- Empty State for Details -->
                    <div id="itemDetailEmpty"
                        style="flex:1; display:flex; align-items:center; justify-content:center; color:#444; margin: 20px; border:1px dashed #333; border-radius:8px;">
                        Selecione um item
                    </div>
                </aside>
            </div>
        </section>

        <!-- SECTION 4: ABILITIES & TECHNIQUES (REDESIGNED) -->
        <section id="abilities" class="dashboard-section">
            <div class="section-header">
                <i data-lucide="zap" style="color: var(--accent-red);"></i>
                <span class="sec-title">Habilidades & Tcnicas</span>
                <button onclick="openTechniqueModal()"
                    style="margin-left: auto; background: var(--accent-purple); border: none; color: white; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight:bold;">
                    <i data-lucide="plus" style="width:16px; vertical-align:middle;"></i> Adicionar Tcnica
                </button>
            </div>

            <!-- Techniques Grid -->
            <div id="techniquesGrid" class="techniques-grid">
                <!-- Techniques will be injected here -->
            </div>

            <!-- Breathing Section -->
            <div style="margin-top: 3rem;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                    <h3
                        style="margin: 0; color: var(--accent-cyan); font-family: var(--font-display); font-size: 1.8rem;">
                        <i data-lucide="wind" style="width:24px; vertical-align:middle; margin-right:8px;"></i>
                        Respirao
                    </h3>
                    <div id="breathingLevelReq" style="font-size: 0.85rem; color: #666;">
                        <i data-lucide="lock" style="width:14px; vertical-align:middle;"></i>
                        Desbloqueado no Nvel 3
                    </div>
                </div>

                <div id="breathingContent" class="breathing-container">
                    <!-- Breathing techniques will be injected here -->
                </div>
            </div>
        </section>

        <!-- SECTION 5: BIO -->
        <section id="bio" class="dashboard-section">
            <div class="section-header">
                <i data-lucide="scroll" style="color: var(--accent-red);"></i>
                <span class="sec-title">Biografia</span>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div>
                    <label style="color:#888; display:block; margin-bottom:5px;">Histria</label>
                    <textarea id="desc-story" class="ds-input" style="height: 150px; width: 100%;"></textarea>
                </div>
                <div>
                    <label style="color:#888; display:block; margin-bottom:5px;">Anotaes</label>
                    <textarea id="desc-notes" class="ds-input" style="height: 150px; width: 100%;"></textarea>
                </div>
            </div>
            <div style="margin-top: 1rem;">
                <label style="color:#888;">Dinheiro (Yenes)</label>
                <input type="text" id="desc-money" class="ds-input" value="0">
            </div>
            <button onclick="saveDescription()"
                style="margin-top: 1rem; background: #222; color: white; padding: 8px 16px; border: 1px solid #444; cursor: pointer;">Salvar
                Bio</button>
        </section>

        <!-- Spacer -->
        <div style="height: 50px;"></div>
    </main>

    <!-- ROLLING LOG OVERLAY (For chat messages) -->
    <div class="roll-log" id="chatContent" style="display: flex; flex-direction:column-reverse;"></div>

    <!-- PREMIUM ITEM MODAL -->
    <div id="itemModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeItemModal()">
        <div class="premium-modal" onclick="event.stopPropagation()">
            <div class="modal-top">
                <h3 class="modal-title"><i data-lucide="package-plus"></i> Forja & Suprimentos</h3>
                <button class="modal-close" onclick="closeItemModal()"><i data-lucide="x"></i></button>
            </div>

            <div class="modal-content-area">
                <!-- Search Bar -->
                <div class="modal-search-bar">
                    <i data-lucide="search"
                        style="position:absolute; left:15px; top:50%; transform:translateY(-50%); width:18px; color:#666;"></i>
                    <input type="text" id="pickerSearch" class="modal-search-input" placeholder="Buscar item..."
                        oninput="searchModal(this.value)">
                </div>

                <!-- Categories -->
                <nav class="modal-cats">
                    <button class="cat-btn active" onclick="filterModal('all', this)">
                        <i data-lucide="grid-3x3"></i> Todos
                    </button>
                    <button class="cat-btn" onclick="filterModal('weapon', this)">
                        <i data-lucide="sword"></i> Armas
                    </button>
                    <button class="cat-btn" onclick="filterModal('armor', this)">
                        <i data-lucide="shield"></i> Armaduras
                    </button>
                    <button class="cat-btn" onclick="filterModal('consumable', this)">
                        <i data-lucide="flask-conical"></i> Consumveis
                    </button>
                    <button class="cat-btn" onclick="filterModal('misc', this)">
                        <i data-lucide="box"></i> Outros
                    </button>
                </nav>

                <!-- Items Grid -->
                <div class="modal-picker" id="pickerGrid">
                    <!-- Items will be injected here by JS -->
                </div>
            </div>

            <div class="modal-footer">
                <span style="font-size:0.85rem; color:#666; margin-right:auto;">
                    <i data-lucide="info" style="width:14px; vertical-align:middle;"></i>
                    Clique em um item para adicion-lo ao inventrio
                </span>
                <button onclick="closeItemModal()" class="modal-btn-secondary">Fechar</button>
            </div>
        </div>
    </div>

    <div id="attackModal" class="modal-overlay" style="display:none;">
        <div style="background:#1a1a1a; padding:2rem; width:400px; border:1px solid #333; border-radius:8px;">
            <h3>Novo Ataque</h3>
            <input type="text" id="newAtkName" placeholder="Nome" class="ds-input" style="margin-bottom:10px;">
            <input type="text" id="newAtkDmg" placeholder="Dano (ex: 1d6+2)" class="ds-input"
                style="margin-bottom:10px;">
            <input type="text" id="newAtkType" placeholder="Tipo (ex: Cortante)" class="ds-input"
                style="margin-bottom:10px;">
            <button onclick="saveCustomAttack()" style="width:100%; padding:10px;">Salvar</button>
            <button onclick="closeAttackModal()"
                style="width:100%; margin-top:5px; background:none; color:#888; border:none; cursor:pointer;">Cancelar</button>
        </div>
    </div>

    <div id="abilityModal" class="modal-overlay" style="display:none;">
        <div style="background:#1a1a1a; padding:2rem; width:400px; border:1px solid #333; border-radius:8px;">
            <h3>Nova Habilidade</h3>
            <input type="text" id="newAbilName" placeholder="Nome" class="ds-input" style="margin-bottom:10px;">
            <textarea id="newAbilDesc" placeholder="Descrio" class="ds-input"
                style="margin-bottom:10px; height:80px;"></textarea>
            <button onclick="saveCustomAbility()" style="width:100%; padding:10px;">Salvar</button>
            <button onclick="closeAbilityModal()"
                style="width:100%; margin-top:5px; background:none; color:#888; border:none; cursor:pointer;">Cancelar</button>
        </div>
    </div>

    <!-- PREMIUM ITEM MODAL -->
    <div id="itemModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeItemModal()">
        <div class="premium-modal" onclick="event.stopPropagation()">
            <div class="modal-top">
                <h3 class="modal-title">
                    <i data-lucide="package-plus"></i>
                    Forja & Suprimentos
                </h3>
                <button class="modal-close" onclick="closeItemModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>

            <div class="modal-content-area">
                <!-- Search Bar -->
                <div class="modal-search-bar">
                    <i data-lucide="search"
                        style="position:absolute; left:15px; top:50%; transform:translateY(-50%); width:18px; color:#666;"></i>
                    <input type="text" id="pickerSearch" class="modal-search-input" placeholder="Buscar item..."
                        oninput="searchModal(this.value)">
                </div>

                <!-- Categories -->
                <nav class="modal-cats">
                    <button class="cat-btn active" onclick="filterModal('all', this)">
                        <i data-lucide="grid-3x3"></i> Todos
                    </button>
                    <button class="cat-btn" onclick="filterModal('weapon', this)">
                        <i data-lucide="sword"></i> Armas
                    </button>
                    <button class="cat-btn" onclick="filterModal('armor', this)">
                        <i data-lucide="shield"></i> Armaduras
                    </button>
                    <button class="cat-btn" onclick="filterModal('consumable', this)">
                        <i data-lucide="flask-conical"></i> Consumveis
                    </button>
                    <button class="cat-btn" onclick="filterModal('misc', this)">
                        <i data-lucide="box"></i> Outros
                    </button>
                </nav>

                <!-- Items Grid -->
                <div class="modal-picker" id="pickerGrid">
                    <!-- Items will be injected here by JS -->
                </div>
            </div>

            <div class="modal-footer">
                <span style="font-size:0.85rem; color:#666; margin-right:auto;">
                    <i data-lucide="info" style="width:14px; vertical-align:middle;"></i>
                    Clique em um item para adicion-lo ao inventrio
                </span>
                <button onclick="closeItemModal()" class="modal-btn-secondary">Fechar</button>
            </div>
        </div>
    </div>

    <!-- PREMIUM ATTACK MODAL -->
    <div id="attackModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeAttackModal()">
        <div class="attack-modal" onclick="event.stopPropagation()">
            <div class="modal-top">
                <h3 class="modal-title">
                    <i data-lucide="sword" style="color: var(--accent-red);"></i>
                    Novo Ataque
                </h3>
                <button class="modal-close" onclick="closeAttackModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>

            <form id="attackForm" onsubmit="handleAttackSubmit(event)" class="attack-form">
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="attack-name">
                            <i data-lucide="tag" style="width:14px; vertical-align:middle;"></i>
                            Nome do Ataque
                        </label>
                        <input type="text" id="attack-name" class="form-input" placeholder="Ex: Golpe Rpido" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="attack-bonus">
                            <i data-lucide="trending-up" style="width:14px; vertical-align:middle;"></i>
                            Bnus de Ataque
                        </label>
                        <input type="text" id="attack-bonus" class="form-input" placeholder="+5" value="+0">
                    </div>

                    <div class="form-group">
                        <label for="attack-damage">
                            <i data-lucide="zap" style="width:14px; vertical-align:middle;"></i>
                            Dano
                        </label>
                        <input type="text" id="attack-damage" class="form-input" placeholder="1d6+2" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="attack-type">
                            <i data-lucide="target" style="width:14px; vertical-align:middle;"></i>
                            Tipo de Ataque
                        </label>
                        <select id="attack-type" class="form-select">
                            <option value="Corpo a Corpo">Corpo a Corpo</option>
                            <option value="Distncia">Distncia</option>
                            <option value="Mgico">Mgico</option>
                            <option value="Respirao">Respirao</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="attack-description">
                            <i data-lucide="file-text" style="width:14px; vertical-align:middle;"></i>
                            Descrio (Opcional)
                        </label>
                        <textarea id="attack-description" class="form-textarea" placeholder="Descreva o ataque..."
                            rows="3"></textarea>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" onclick="closeAttackModal()" class="modal-btn-secondary">
                        <i data-lucide="x" style="width:16px;"></i>
                        Cancelar
                    </button>
                    <button type="submit" class="modal-btn-primary">
                        <i data-lucide="plus-circle" style="width:16px;"></i>
                        Adicionar Ataque
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->

    <!-- MOBILE OVERLAY (Click to close sidebars) -->
    <div class="mobile-overlay" onclick="closeSidebars()"></div>

    <!-- MOBILE HEADER -->
    <div class="mobile-header">
        <button onclick="toggleLeftSidebar()" style="background:none; border:none; color:white;">
            <i data-lucide="menu"></i>
        </button>
        <div class="mobile-header-title">DEMON SLAYER</div>
        <button onclick="toggleRightSidebar()" style="background:none; border:none; color:white;">
            <div
                style="width:30px; height:30px; background:#333; border-radius:50%; display:flex; align-items:center; justify-content:center; border:1px solid var(--accent-red);">
                <i data-lucide="user" style="width:16px;"></i>
            </div>
        </button>
    </div>

    <!-- MOBILE BOTTOM NAV -->
    <div class="mobile-nav-bar">
        <button class="mobile-nav-item active" onclick="showSection('overview'); closeSidebars()">
            <i data-lucide="layout-dashboard" style="width:20px;"></i>
            <span>Painel</span>
        </button>
        <button class="mobile-nav-item" onclick="showSection('combat'); closeSidebars()">
            <i data-lucide="sword" style="width:20px;"></i>
            <span>Combate</span>
        </button>
        <button class="mobile-nav-item" onclick="showSection('inventory'); closeSidebars()">
            <i data-lucide="backpack" style="width:20px;"></i>
            <span>Inv.</span>
        </button>
        <button class="mobile-nav-item" onclick="showSection('abilities'); closeSidebars()">
            <i data-lucide="zap" style="width:20px;"></i>
            <span>Skill</span>
        </button>
    </div>

    <!-- Scripts - Initialization First -->
    <script src="dashboard_init.js"></script>
    <script src="items_db.js"></script>
    <script src="dashboard.js"></script>
    <script src="inventory_modules.js"></script>
    <script src="techniques_system.js"></script>
    <script src="attributes_enhanced.js"></script>
    <script src="combat_system.js"></script>
    <script src="skills_system.js"></script>
    <script>
        // Fix for Radar Chart Init
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                if (typeof updateRadarChart === 'function') updateRadarChart();
                if (typeof updatePaperDoll === 'function') updatePaperDoll();
            }, 200);
        });

        // Hook into updates
        const _origUpdate = window.updateLevel;
        window.updateLevel = function () {
            if (_origUpdate) _origUpdate();
            if (typeof updateRadarChart === 'function') updateRadarChart();
        }

        const _origStat = window.rollStat;
        window.rollStat = function (key) {
            if (_origStat) _origStat(key);
            // Also update chart if stats changed?
            if (typeof updateRadarChart === 'function') updateRadarChart();
        }
    </script>
    <style>
        /* Global Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0a0f;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-red);
        }
    </style>
    <script>
        function toggleLeftSidebar() {
            document.querySelector('.sidebar-left').classList.toggle('open');
            document.querySelector('.mobile-overlay').classList.toggle('open');
            // Close right if open
            if (document.querySelector('.sidebar-left').classList.contains('open')) {
                document.querySelector('.sidebar-right').classList.remove('open');
            }
        }

        function toggleRightSidebar() {
            document.querySelector('.sidebar-right').classList.toggle('open');
            document.querySelector('.mobile-overlay').classList.toggle('open');
            // Close left if open
            if (document.querySelector('.sidebar-right').classList.contains('open')) {
                document.querySelector('.sidebar-left').classList.remove('open');
            }
        }

        function closeSidebars() {
            document.querySelector('.sidebar-left').classList.remove('open');
            document.querySelector('.sidebar-right').classList.remove('open');
            document.querySelector('.mobile-overlay').classList.remove('open');
        }

        // Tab Navigation Logic
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.dashboard-section').forEach(el => {
                el.classList.remove('active-tab');
            });

            // Show target section
            const target = document.getElementById(sectionId);
            if (target) target.classList.add('active-tab');

            // Update Sidebar State
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
            });

            // Find the button (approximate match by onclick content)
            const activeNav = Array.from(document.querySelectorAll('.nav-item')).find(el => {
                const clickAttr = el.getAttribute('onclick');
                return clickAttr && clickAttr.includes(sectionId);
            });

            if (activeNav) activeNav.classList.add('active');
        }

        // Initialize Default Tab
        document.addEventListener('DOMContentLoaded', () => {
            showSection('overview');
        });

        // Initialize Lucide
        if (window.lucide) lucide.createIcons();
    </script>
</body>

</html>