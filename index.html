<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hashira RPG | Breath of the Sun</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Cinzel:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg-dark: #050505;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --accent-red: #d90429;
            --accent-glow: #ef233c;
            --accent-gold: #ffd166;
            --glass-bg: rgba(20, 20, 20, 0.6);
            --glass-border: rgba(255, 255, 255, 0.1);
            --font-main: 'Outfit', sans-serif;
            --font-display: 'Cinzel', serif;
        }

        /* --- GLOBAL ANIMATIONS --- */
        /* --- GLOBAL ANIMATIONS --- */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes heroFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .reveal {
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .delay-100 {
            transition-delay: 0.1s;
        }

        .delay-200 {
            transition-delay: 0.2s;
        }

        .delay-300 {
            transition-delay: 0.3s;
        }

        .delay-400 {
            transition-delay: 0.4s;
        }

        /* WISTERIA PARTICLES */
        .wisteria-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .petal {
            position: absolute;
            top: -10px;
            background: linear-gradient(135deg, #e0aaff, #c77dff);
            border-radius: 50% 0 50% 0;
            opacity: 0.8;
            box-shadow: 0 0 10px rgba(224, 170, 255, 0.5);
            animation: fall 6s linear infinite;
        }

        @keyframes fall {
            0% {
                transform: translateY(0) rotate(0deg) translateX(0);
                opacity: 0;
            }

            10% {
                opacity: 0.8;
            }

            50% {
                transform: translateY(40vh) rotate(180deg) translateX(50px);
            }

            100% {
                transform: translateY(100vh) rotate(360deg) translateX(100px);
                opacity: 0;
            }
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: var(--font-main);
            overflow-x: hidden;
            line-height: 1.6;
        }

        a {
            text-decoration: none;
            color: inherit;
            transition: 0.3s;
        }

        .pulse-effect {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(217, 4, 41, 0.7);
            }

            70% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(217, 4, 41, 0);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(217, 4, 41, 0);
            }
        }

        /* --- NAVBAR --- */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            /* Centers the inner container */
            z-index: 1000;
            background: rgba(5, 5, 5, 0.6);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s ease;
        }

        .nav-container {
            width: 100%;
            max-width: 1400px;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: var(--font-display);
            font-weight: 800;
            font-size: 1.6rem;
            /* Larger logo */
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 15px;
            text-transform: uppercase;
            text-shadow: 0 0 20px rgba(217, 4, 41, 0.5);
        }

        .logo i {
            color: var(--accent-red);
            filter: drop-shadow(0 0 10px var(--accent-red));
        }

        .nav-links {
            display: flex;
            gap: 3rem;
        }

        .nav-link {
            font-size: 1rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
            position: relative;
            letter-spacing: 0.5px;
            transition: 0.3s;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-red);
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px var(--accent-red);
        }

        .nav-link:hover {
            color: white;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-actions {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .btn-outline {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ccc;
            padding: 0.6rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(5px);
        }

        .btn-outline:hover {
            border-color: var(--accent-red);
            color: white;
            background: rgba(217, 4, 41, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(217, 4, 41, 0.2);
        }

        /* --- HERO SECTION --- */
        .hero {
            position: relative;
            height: 100dvh;
            /* Dynamic Viewport Height */
            min-height: 600px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            background: radial-gradient(circle at center, rgba(0, 0, 0, 0.2) 0%, #050505 100%),
                linear-gradient(to bottom, rgba(0, 0, 0, 0.3), #050505),
                url('https://images.alphacoders.com/109/1099882.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Overlay to darken image */
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(2, 2, 5, 0.8) 0%, rgba(5, 5, 8, 0.55) 50%, rgba(5, 5, 10, 0.9) 100%);
            z-index: 1;
        }

        .hero::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 20% 20%, rgba(217, 4, 41, 0.25), transparent 55%),
                radial-gradient(circle at 80% 10%, rgba(255, 209, 102, 0.18), transparent 45%);
            z-index: 1;
            mix-blend-mode: screen;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 900px;
            padding: 2.5rem 3rem;
            border-radius: 24px;
            background: rgba(8, 8, 12, 0.65);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.55);
            backdrop-filter: blur(16px);
        }

        .hero-title {
            font-family: var(--font-display);
            text-transform: uppercase;
            letter-spacing: 4px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.75);
            margin: 0 0 0.75rem;
            opacity: 0;
            animation: heroFadeIn 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.1s;
        }

        .hero h1 {
            font-family: var(--font-display);
            font-size: 5rem;
            line-height: 1.3;
            margin-bottom: 1rem;
            text-shadow: 0 4px 50px rgba(0, 0, 0, 0.9);
            background: linear-gradient(to bottom, #fff, #ccc);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            animation: heroFadeIn 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.2s;
        }

        .hero p {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.85);
            max-width: 650px;
            margin: 0 auto 3rem auto;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
            opacity: 0;
            animation: heroFadeIn 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.5s;
        }

        .hero-badges {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin: 0 auto 1.5rem;
            opacity: 0;
            animation: heroFadeIn 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.35s;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0.45rem 1rem;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            font-size: 0.85rem;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.85);
        }

        .hero-btns {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
            opacity: 0;
            animation: heroFadeIn 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.8s;
        }

        .btn-hero-primary {
            background: linear-gradient(135deg, var(--accent-red), #9d0208);
            color: white;
            padding: 1rem 3rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 0 20px rgba(217, 4, 41, 0.3);
            transition: all 0.3s;
        }

        .btn-hero-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px rgba(217, 4, 41, 0.6);
        }

        .btn-hero-secondary {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            color: white;
            padding: 1rem 3rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .btn-hero-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: white;
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            /* Moved up slightly */
            left: 50%;
            transform: translateX(-50%);
            z-index: 3;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .scroll-indicator:hover {
            opacity: 1;
        }

        .scroll-text {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }

        .mouse {
            width: 26px;
            height: 40px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 13px;
            position: relative;
        }

        .mouse::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 8px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 2px;
            animation: scroll 1.5s infinite;
        }

        @keyframes scroll {
            0% {
                opacity: 1;
                top: 8px;
            }

            50% {
                opacity: 0.5;
                top: 20px;
            }

            100% {
                opacity: 0;
                top: 20px;
            }
        }

        /* --- SECTIONS & CARDS --- */
        .section-padding {
            padding: 4rem 2rem;
        }

        .char-section,
        .story-container {
            gap: 4rem;
            max-width: 1200px;
            margin: 0 auto;
            align-items: center;
        }

        .story-container {
            display: flex;
            justify-content: space-between;
            gap: 4rem;
            align-items: center;
        }

        /* ensuring flex for story */

        .story-text h4 {
            color: var(--accent-red);
            font-size: 0.9rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 1rem;
            font-weight: 800;
        }

        .story-text h2 {
            font-family: var(--font-display);
            font-size: 3rem;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .story-text p {
            color: var(--text-muted);
            line-height: 1.7;
            margin-bottom: 2rem;
            font-size: 1.05rem;
        }

        .read-more {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: gap 0.2s;
        }

        .read-more:hover {
            gap: 10px;
            color: var(--accent-red);
        }

        .story-img-box {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, #101015, #1a1a20);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            border: 1px solid #333;
        }

        /* Placeholder for Story Image using gradients */
        .story-placeholder {
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 80% 20%, rgba(255, 200, 100, 0.2) 0%, transparent 20%),
                linear-gradient(to bottom, #0a0a0f, #151520);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }

        /* --- STYLES SECTION --- */
        .styles-section {
            background: #0a0a0a;
            text-align: center;
        }

        .styles-section h2 {
            font-family: var(--font-display);
            font-size: 3rem;
            margin-bottom: 2rem;
        }

        .subtitle {
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto 4rem auto;
            font-size: 1.1rem;
        }

        .styles-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            /* Force 4 side-by-side */
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        @media (max-width: 1200px) {
            .styles-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .styles-grid {
                grid-template-columns: 1fr;
            }
        }

        .style-card {
            height: 480px;
            background: #0f0f0f;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: left;
        }

        .style-card:hover {
            transform: translateY(-15px) scale(1.02);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }

        .style-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.8s ease;
        }

        .style-card:hover .style-bg {
            transform: scale(1.15);
        }

        .style-content {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 2.5rem;
            background: linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0.8) 50%, transparent);
            z-index: 2;
        }

        .style-icon {
            margin-bottom: 10px;
        }

        .style-name {
            font-size: 1.6rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            font-family: var(--font-display);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .style-desc {
            font-size: 0.95rem;
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .view-skills {
            font-size: 0.85rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.3s;
        }

        .style-card:hover .view-skills {
            gap: 12px;
        }

        /* Specific Gradients for Cards since image gen failed */
        .bg-water {
            background: linear-gradient(135deg, #023e8a, #0077b6, #000);
        }

        .bg-thunder {
            background: linear-gradient(135deg, #ffb703, #fb8500, #000);
        }

        .bg-beast {
            background: linear-gradient(135deg, #6c757d, #343a40, #000);
        }

        .bg-flame {
            background: linear-gradient(135deg, #d00000, #9d0208, #000);
        }

        .txt-water {
            color: #48cae4;
        }

        .txt-thunder {
            color: #ffb703;
        }

        .txt-beast {
            color: #adb5bd;
        }

        .txt-flame {
            color: #ff5e62;
        }

        /* --- MECHANICS SECTION --- */
        .mechanics-section {
            background: #080808;
        }

        .mech-header {
            max-width: 600px;
            margin-bottom: 3rem;
        }

        .mech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .mech-card {
            background: rgba(20, 20, 20, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 2.5rem;
            border-radius: 16px;
            transition: 0.3s;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            position: relative;
            overflow: hidden;
        }

        .mech-card:hover {
            border-color: var(--accent-red);
            background: rgba(30, 30, 30, 0.8);
            transform: translateY(-8px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .mech-icon-box {
            width: 60px;
            height: 60px;
            background: rgba(217, 4, 41, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-red);
            margin-bottom: 1rem;
            transition: 0.3s;
        }

        .mech-card:hover .mech-icon-box {
            background: var(--accent-red);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(217, 4, 41, 0.4);
        }

        /* --- FOOTER CTA --- */
        .cta-footer {
            background: url('https://w.wallhaven.cc/full/8o/wallhaven-8oxgqy.jpg') center/cover fixed;
            position: relative;
            padding: 8rem 2rem;
            text-align: center;
        }

        .cta-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #000, rgba(0, 0, 0, 0.4), #000);
        }

        .cta-content {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .cta-content h2 {
            font-family: var(--font-display);
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .cta-content p {
            color: #ccc;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .footer-links {
            background: #050505;
            padding: 2rem;
            border-top: 1px solid #222;
            color: #666;
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* --- MOBILE ADAPTATIONS --- */
        /* Mobile Toggle Button */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            z-index: 1002;
        }

        /* Mobile Drawer */
        .mobile-drawer {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80%;
            max-width: 300px;
            height: 100vh;
            background: linear-gradient(to bottom, #0a0a0c, #000);
            border-left: 1px solid #333;
            z-index: 1001;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            padding: 5rem 2rem 2rem 2rem;
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.8);
        }

        .mobile-drawer.active {
            right: 0;
        }

        .mobile-drawer a {
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 1.2rem;
            color: #ccc;
            font-family: var(--font-display);
        }

        .mobile-drawer a:hover {
            color: var(--accent-red);
            padding-left: 10px;
        }

        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .drawer-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        /* RESPONSIVE QUERIES */
        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
            }

            .nav-container {
                padding: 0;
            }

            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero-content {
                padding: 2rem 1.5rem;
                margin: 0 1rem;
            }

            .hero-badges {
                gap: 0.5rem;
            }

            .hero-badge {
                font-size: 0.75rem;
                padding: 0.4rem 0.8rem;
            }

            .hero p {
                font-size: 1rem;
                padding: 0 1rem;
            }

            .story-container {
                grid-template-columns: 1fr;
                flex-direction: column;
            }

            .story-img-box {
                height: 250px;
            }

            .styles-grid {
                grid-template-columns: 1fr;
            }

            .mech-grid {
                display: flex;
                flex-direction: column;
            }

            /* Style Chooser Mobile */
            .style-tabs {
                justify-content: flex-start;
                overflow-x: auto;
                padding: 0 1rem 1rem 1rem;
                mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);
                -webkit-mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);
                /* Mask helps show scroll */
            }

            .style-tab-btn {
                flex-shrink: 0;
            }

            .style-chooser-content {
                grid-template-columns: 1fr;
                margin-top: 1rem;
            }

            .style-char-art {
                position: relative;
                height: 300px;
                width: auto;
                margin: 0 auto;
                opacity: 0.8;
                mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
                -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
            }

            .style-info-display {
                padding: 1rem;
                text-align: center;
                align-items: center;
            }

            .cta-content h2 {
                font-size: 2rem;
            }

            .footer-links {
                flex-direction: column;
                gap: 1.5rem;
                text-align: center;
            }
        }

        /* --- TRANSITION OVERLAY (SHUTTER) --- */
        .transition-layer {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            pointer-events: none;
        }

        .shutter-top,
        .shutter-bottom {
            position: absolute;
            left: 0;
            width: 100%;
            height: 50%;
            background: #000;
            transition: transform 0.6s cubic-bezier(0.8, 0, 0.2, 1);
        }

        .shutter-top {
            top: 0;
            transform: translateY(-100%);
            border-bottom: 2px solid var(--accent-red);
        }

        .shutter-bottom {
            bottom: 0;
            transform: translateY(100%);
            border-top: 2px solid var(--accent-red);
        }

        .transition-layer.active {
            pointer-events: all;
        }

        .transition-layer.active .shutter-top {
            transform: translateY(0);
        }

        .transition-layer.active .shutter-bottom {
            transform: translateY(0);
        }

        .transition-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            z-index: 10000;
            color: var(--accent-red);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transition-delay: 0.3s;

            /* --- PREMIUM SWIPE TRANSITION --- */
            .transition-layer {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 9999;
                pointer-events: none;
                overflow: hidden;
            }

            .swipe-layer-1,
            .swipe-layer-2 {
                position: absolute;
                top: 0;
                left: 0;
                width: 150%;
                height: 100%;
                transform: translateX(-100%) skewX(-15deg);
                transform-origin: top left;
                transition: transform 0.8s cubic-bezier(0.7, 0, 0.2, 1);
                will-change: transform;
            }

            .swipe-layer-1 {
                background: var(--accent-red);
                z-index: 1;
            }

            .swipe-layer-2 {
                background: #000;
                z-index: 2;
                transition-delay: 0.15s;
                /* Staggered by CSS now */
            }

            /* Active States */
            .transition-layer.active {
                pointer-events: all;
            }

            .transition-layer.active .swipe-layer-1,
            .transition-layer.active .swipe-layer-2 {
                transform: translateX(-10%) skewX(-15deg);
                /* Moves both, delay handles stagger */
            }

            /* Icon Entrance */
            .transition-icon {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0.8);
                z-index: 3;
                opacity: 0;
                transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
                transition-delay: 0.5s;
                /* Wait for black swipe */
            }

            .transition-layer.active .transition-icon {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
    </style>
    <link rel="stylesheet" href="css/custom_effects.css">
</head>

<body>
    <!-- TRANSITION LAYER -->
    <div id="transitionLayer" class="transition-layer">
        <div class="swipe-layer-1"></div>
        <div class="swipe-layer-2"></div>
        <div class="transition-icon">
            <img src="assets/hashira-logo.png"
                style="width: 200px; filter: drop-shadow(0 0 20px rgba(255, 42, 42, 0.6));">
        </div>
    </div>

    <!-- NAV -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span
                    style="font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 1.2rem; letter-spacing: 2px; text-transform: uppercase; color: rgba(255,255,255,0.9);">Hashira
                    RPG</span>
            </div>

            <!-- Links Removidos (Sistema, História, Comunidade) -->

            <div class="nav-actions">
                <button onclick="toggleMobileMenu()" class="mobile-menu-btn"><i data-lucide="menu"
                        size="28"></i></button>
                <!-- JS Inject -->
            </div>
        </div>
    </nav>

    <!-- MOBILE DRAWER -->
    <div class="drawer-overlay" id="drawerOverlay" onclick="toggleMobileMenu()"></div>
    <div class="mobile-drawer" id="mobileDrawer">
        <div
            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem; border-bottom:1px solid #333; padding-bottom:1rem;">
            <span style="font-family:var(--font-display); color:white; font-size:1.2rem;">MENU</span>
            <button onclick="toggleMobileMenu()" style="background:none; border:none; color:#666; cursor:pointer;"><i
                    data-lucide="x" size="24"></i></button>
        </div>
        <a href="index.html" onclick="toggleMobileMenu()"><i data-lucide="home" size="18"
                style="margin-right:10px; color:var(--accent-red);"></i> Início</a>
        <a href="create-character.html" onclick="toggleMobileMenu()"><i data-lucide="sword" size="18"
                style="margin-right:10px; color:var(--accent-red);"></i> Novo Jogo</a>
        <a href="characters.html" onclick="toggleMobileMenu()"><i data-lucide="users" size="18"
                style="margin-right:10px; color:var(--accent-red);"></i> Personagens</a>
        <a href="campaign-hub.html" onclick="toggleMobileMenu()"><i data-lucide="map" size="18"
                style="margin-right:10px; color:var(--accent-red);"></i> Campanha</a>
        <a href="login.html" onclick="toggleMobileMenu()"><i data-lucide="log-in" size="18"
                style="margin-right:10px; color:var(--accent-red);"></i> Login</a>
    </div>

    <!-- HERO -->
    <header class="hero">
        <div class="wisteria-container" id="wisteria"></div>
        <div class="hero-content">
            <div class="hero-title-container"
                style="padding: 0 1rem; display: flex; justify-content: center; margin-bottom: 1.5rem;">
                <img src="assets/hashira-logo.png" alt="Hashira RPG"
                    style="max-width: 350px; width: 100%; opacity: 0; animation: heroFadeIn 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.2s; filter: drop-shadow(0 0 15px rgba(0,0,0,0.6)); image-rendering: -webkit-optimize-contrast; transform: translateZ(0);">
            </div>
            <div class="hero-title">Respiração do Sol</div>
            <h1>Hashira RPG</h1>
            <div class="hero-badges">
                <span class="hero-badge"><i data-lucide="sparkles" style="width:16px;"></i> Nova Jornada</span>
                <span class="hero-badge"><i data-lucide="swords" style="width:16px;"></i> Combate Épico</span>
                <span class="hero-badge"><i data-lucide="shield" style="width:16px;"></i> Campanhas Vivas</span>
            </div>
            <h2 class="hero-subtitle" style="display:none;">END THE NIGHTMARE.</h2>
            <p style="margin-top: 1rem;">Junte-se à Corporação de Caçadores na experiência definitiva de RPG baseada em
                navegador. Cace demônios,
                masterize estilos de respiração e ascenda de Mizunoto a Hashira.</p>
            <div class="hero-btns">
                <a href="create-character.html" onclick="playTransition(event, 'create-character.html')"
                    class="btn-hero-primary">
                    <i data-lucide="play" style="width:18px;"></i> Jogar Agora
                </a>
                <a href="campaign-hub.html" class="btn-hero-secondary"
                    style="border-color:var(--accent-gold); color:var(--accent-gold); background:rgba(255, 215, 0, 0.1);">
                    <i data-lucide="map" style="width:18px;"></i> Modo Campanha
                </a>
                <a href="#" class="btn-hero-secondary">
                    Ver Trailer
                </a>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="scroll-indicator"
            onclick="document.querySelector('.char-section').scrollIntoView({behavior: 'smooth'})">
            <span class="scroll-text">Scroll</span>
            <div class="mouse"></div>
        </div>
    </header>

    <!-- SYSTEM FEATURES -->
    <section class="features-section">
        <h2 class="features-title reveal">Domine a Respiração Total</h2>
        <div class="features-grid">
            <!-- Card A: Creation -->
            <div class="glass-card glow-water reveal delay-100">
                <div class="card-icon">
                    <i data-lucide="user" style="width:48px; height:48px;"></i>
                </div>
                <h3>Criação Profunda</h3>
                <p>Crie Caçadores, Onis ou Hashiras com fichas automatizadas e árvores de talentos completas.</p>
            </div>

            <!-- Card B: Combat -->
            <div class="glass-card glow-fire reveal delay-200">
                <div class="card-icon">
                    <i data-lucide="swords" style="width:48px; height:48px;"></i>
                </div>
                <h3>Combate em Tempo Real</h3>
                <p>Role dados, gerencie iniciativa e use técnicas de respiração com um clique.</p>
            </div>

            <!-- Card C: Campaign -->
            <div class="glass-card glow-thunder reveal delay-300">
                <div class="card-icon">
                    <i data-lucide="scroll" style="width:48px; height:48px;"></i>
                </div>
                <h3>Campanha Persistente</h3>
                <p>Seu progresso salvo na nuvem. Leve sua lenda do celular para o PC.</p>
            </div>
        </div>
    </section>

    <!-- CHARACTERS MODAL -->
    <div id="charsModal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; z-index:999; backdrop-filter:blur(8px); background:rgba(0,0,0,0.8); align-items:center; justify-content:center;">
        <div
            style="background:#111; border:1px solid #333; padding:2rem; width:100%; max-width:600px; border-radius:12px; position:relative;">
            <div
                style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem; border-bottom:1px solid #222; padding-bottom:1rem;">
                <h2 style="font-family:var(--font-display); font-size:1.8rem;">Meus Personagens <span id="charCount"
                        style="font-size:1rem; color:#666; vertical-align:middle; margin-left:10px;">(0/5)</span></h2>
                <button onclick="closeCharsModal()"
                    style="background:transparent; border:none; color:#888; font-size:1.5rem; cursor:pointer;">&times;</button>
            </div>

            <div id="charList"
                style="display:flex; flex-direction:column; gap:1rem; max-height:400px; overflow-y:auto; margin-bottom:2rem;">
                <!-- Injected via JS -->
            </div>

            <button id="createNewBtn" onclick="window.location.href='create-character.html'"
                style="width:100%; background:#1a1a1a; border:2px dashed #333; color:#888; padding:1rem; cursor:pointer; font-weight:bold; border-radius:8px; display:flex; align-items:center; justify-content:center; gap:10px; transition:all 0.2s;">
                <i data-lucide="plus"></i> Criar Novo Personagem
            </button>
        </div>
    </div>

    <!-- STORY -->
    <section class="section-padding">
        <div class="story-container reveal">
            <div class="story-text">
                <h4>A HISTÓRIA COMEÇA</h4>
                <h2>A Era Taisho Aguarda</h2>
                <p>Mergulhe em um mundo de demônios e espadachins. Forje seu próprio caminho em um Japão fielmente
                    recriado onde o perigo espreita nas sombras de cada noite. Você dominará a calma da Água, ou
                    liberará o poder estrondoso do Trovão?</p>
                <div class="read-more">Ler a História Completa <i data-lucide="arrow-right" style="width:16px;"></i>
                </div>
            </div>
            <div class="story-img-box">
                <div class="story-placeholder">
                    <img src="https://images4.alphacoders.com/992/992854.jpg"
                        style="width:100%; height:100%; object-fit:cover; opacity:0.6;">
                </div>
            </div>
        </div>
    </section>

    <!-- STYLES -->
    <section class="section-padding styles-section" id="styles">
        <h2 class="reveal">Domine Sua Técnica</h2>
        <p class="subtitle reveal delay-200">Escolha entre diversos estilos de respiração únicos, cada um com
            sua árvore de habilidades e
            formas definitivas.</p>

        <div class="styles-grid">
            <!-- Water (Tanjiro) -->
            <div class="style-card reveal delay-200">
                <div class="style-bg"
                    style="background-image: url('assets/Tanjirou_manga.png'); background-size: cover; background-position: top center;">
                </div>
                <div class="style-overlay"
                    style="position:absolute; inset:0; background:linear-gradient(to top, rgba(0,0,0,0.95), transparent);">
                </div>
                <div class="style-content">
                    <div class="style-icon txt-water"><i data-lucide="droplet"></i></div>
                    <div class="style-name">Respiração da Água</div>
                    <div class="style-desc">Fluida e adaptável como Tanjiro. Defesa impecável e contra-ataques
                        precisos.
                    </div>
                    <div class="view-skills txt-water">Ver Habilidades <i data-lucide="arrow-right"
                            style="width:12px;"></i></div>
                </div>
            </div>
            <!-- Thunder (Zenitsu) -->
            <div class="style-card reveal delay-300">
                <div class="style-bg"
                    style="background-image: url('assets/Zenitsu_colored_body_2\ \(1\).png'); background-size: cover; background-position: top center;">
                </div>
                <div class="style-overlay"
                    style="position:absolute; inset:0; background:linear-gradient(to top, rgba(0,0,0,0.95), transparent);">
                </div>
                <div class="style-content">
                    <div class="style-icon txt-thunder"><i data-lucide="zap"></i></div>
                    <div class="style-name">Respiração do Trovão</div>
                    <div class="style-desc">Velocidade divina como Zenitsu. Um único golpe que corta o ar antes
                        do som.
                    </div>
                    <div class="view-skills txt-thunder">Ver Habilidades <i data-lucide="arrow-right"
                            style="width:12px;"></i></div>
                </div>
            </div>
            <!-- Beast (Inosuke) -->
            <div class="style-card reveal delay-400">
                <div class="style-bg"
                    style="background-image: url('assets/Inosuke3\ \(1\).png'); background-size: cover; background-position: top center;">
                </div>
                <div class="style-overlay"
                    style="position:absolute; inset:0; background:linear-gradient(to top, rgba(0,0,0,0.95), transparent);">
                </div>
                <div class="style-content">
                    <div class="style-icon txt-beast"><i data-lucide="paw-print"></i></div>
                    <div class="style-name">Respiração da Fera</div>
                    <div class="style-desc">Selvagem como Inosuke. Sentidos aguçados e ataques imprevisíveis.
                    </div>
                    <div class="view-skills txt-beast">Ver Habilidades <i data-lucide="arrow-right"
                            style="width:12px;"></i></div>
                </div>
            </div>
            <!-- Kekkijutsu (Nezuko) -->
            <div class="style-card reveal delay-400">
                <div class="style-bg"
                    style="background-image: url('assets/NezukoKamado.png'); background-size: cover; background-position: top center;">
                </div>
                <div class="style-overlay"
                    style="position:absolute; inset:0; background:linear-gradient(to top, rgba(0,0,0,0.95), transparent);">
                </div>
                <div class="style-content">
                    <div class="style-icon txt-flame"><i data-lucide="sparkles"></i></div>
                    <div class="style-name">Kekkijutsu</div>
                    <div class="style-desc">A arte do sangue demoníaco. Poderes sobrenaturais como os de Nezuko.
                    </div>
                    <div class="view-skills txt-flame">Ver Poderes <i data-lucide="arrow-right" style="width:12px;"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- MECHANICS -->
    <section class="section-padding mechanics-section" id="mechanics">
        <div style="max-width:1200px; margin:0 auto;">
            <div class="mech-header reveal">
                <h2>Mecânicas de Jogo</h2>
                <p style="color:#aaa;">Sistemas de RPG profundos projetados para estratégia, progressão e
                    cooperação.
                </p>
            </div>

            <div class="mech-grid">
                <div class="mech-card">
                    <div class="mech-icon-box"><i data-lucide="medal"></i></div>
                    <h4>Sistema de Rank</h4>
                    <p style="color:#888; font-size:0.9rem;">Suba na hierarquia da Corporação. De Mizunoto até o
                        lendário posto de Hashira.</p>
                </div>
                <div class="mech-card">
                    <div class="mech-icon-box"><i data-lucide="hammer"></i></div>
                    <h4>Forja & Crafting</h4>
                    <p style="color:#888; font-size:0.9rem;">Colete minérios e forje sua Lâmina Nichirin
                        definitiva,
                        mudando de cor conforme sua alma.</p>
                </div>
                <div class="mech-card">
                    <div class="mech-icon-box"><i data-lucide="map"></i></div>
                    <h4>Mundo Aberto</h4>
                    <p style="color:#888; font-size:0.9rem;">Explore desde as montanhas nevadas até a Mansão
                        Borboleta e
                        o Distrito da Luz Vermelha.</p>
                </div>
                <div class="mech-card">
                    <div class="mech-icon-box"><i data-lucide="swords"></i></div>
                    <h4>Arena PVP</h4>
                    <p style="color:#888; font-size:0.9rem;">Teste suas habilidades de respiração contra outros
                        caçadores em duelos rankeados.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- STYLE CHOOSER SECTION -->
    <section class="style-chooser-section" id="chooseStyle">
        <!-- Background Layers -->
        <div class="style-bg-layer bg-water-art" id="bg-water"></div>
        <div class="style-bg-layer bg-flame-art" id="bg-flame"></div>
        <div class="style-bg-layer bg-thunder-art" id="bg-thunder"></div>
        <div class="style-bg-layer bg-beast-art" id="bg-beast"></div>
        <div class="style-bg-layer bg-oni-art" id="bg-oni"></div>
        <div class="style-bg-overlay"></div>

        <!-- Content -->
        <div class="style-chooser-content">
            <!-- Tabs -->
            <div class="style-tabs">
                <button class="style-tab-btn" data-style="water" onmouseenter="previewStyle('water')"
                    onclick="lockStyle('water')">Respiração da Água</button>
                <button class="style-tab-btn" data-style="flame" onmouseenter="previewStyle('flame')"
                    onclick="lockStyle('flame')">Respiração das Chamas</button>
                <button class="style-tab-btn" data-style="thunder" onmouseenter="previewStyle('thunder')"
                    onclick="lockStyle('thunder')">Respiração do Trovão</button>
                <button class="style-tab-btn" data-style="beast" onmouseenter="previewStyle('beast')"
                    onclick="lockStyle('beast')">Respiração da Fera</button>
                <button class="style-tab-btn" data-style="oni" onmouseenter="previewStyle('oni')"
                    onclick="lockStyle('oni')">Poder Oni</button>
            </div>

            <!-- Info Display -->
            <div class="style-info-display active" id="styleInfo">
                <h2 class="style-title title-water" id="infoTitle">Água</h2>
                <div class="style-desc" id="infoDesc">
                    Fluida, adaptável e implacável. A defesa perfeita que se transforma em um ataque devastador. Para
                    aqueles que mantêm a calma no caos.
                </div>
                <a href="create-character.html?style=water" class="btn-style-cta btn-water" id="infoBtn">
                    Criar Personagem deste Estilo <i data-lucide="arrow-right"></i>
                </a>
            </div>

            <!-- Character Art -->
            <img src="assets/Tanjirou_manga.png" class="style-char-art active" id="charArt" alt="Character Art">
        </div>
    </section>

    <!-- FOOTER CTA -->
    <section class="cta-footer">
        <div class="cta-content reveal">
            <h2>Pronto para Caçar?</h2>
            <p>A Corporação Hashira precisa da sua lâmina. Junte-se a thousands de outros jogadores na luta
                pela
                humanidade.</p>
            <div style="display:flex; gap:1rem;">
                <a href="create-character.html" class="btn-play" style="font-size:1.2rem; padding:1rem 2rem;">Começar
                    Aventura</a>
                <a href="https://discord.gg/aCGCuwN9" target="_blank" class="btn-hero-secondary"
                    style="background:rgba(0,0,0,0.5);">Entrar no Discord</a>
            </div>
        </div>
    </section>

    <footer class="footer-links">
        <div style="display:flex; align-items:center; gap:10px;">
            <i data-lucide="flame" style="color:var(--accent-red)"></i>
            <strong>Hashira RPG</strong>
        </div>
        <div style="display:flex; flex-direction: column; align-items: center; gap: 5px;">
            <span>© 2025 Hashira RPG Project. Fã-made.</span>
            <span style="font-size: 0.9rem; color: var(--accent-red); font-weight: 600;">Feito por Nícolas
                Silveira</span>
        </div>
        <div style="display:flex; gap:20px;">
            <a href="#">Termos</a>
            <a href="#">Privacidade</a>
            <a href="#">Wiki</a>
        </div>
    </footer>

    <script>
        lucide.createIcons();

        // CHAR MODAL LOGIC
        function openCharsModal() {
            document.getElementById('charsModal').style.display = 'flex';
            renderCharList();
        }

        function closeCharsModal() {
            document.getElementById('charsModal').style.display = 'none';
        }

        function renderCharList() {
            const list = document.getElementById('charList');
            list.innerHTML = '';

            let allChars = [];
            try {
                // Check both keys for migration/robustness
                const stored = localStorage.getItem('demonSlayerAllChars') || localStorage.getItem('demonSlayerSaveSlots');
                if (stored) allChars = JSON.parse(stored);

                // MIGRATION: Check if old single char exists but array is empty
                if (allChars.length === 0) {
                    const single = localStorage.getItem('demonSlayerChar');
                    if (single) {
                        const parsedSingle = JSON.parse(single);
                        parsedSingle.id = parsedSingle.id || Date.now().toString(); // Assign ID if missing
                        allChars.push(parsedSingle);
                        localStorage.setItem('demonSlayerAllChars', JSON.stringify(allChars));
                    }
                }
            } catch (e) { allChars = []; }

            // Update Count
            document.getElementById('charCount').innerText = `(${allChars.length}/5)`;

            // Toggle Create Button
            const createBtn = document.getElementById('createNewBtn');
            if (allChars.length >= 5) {
                createBtn.onclick = (e) => { e.preventDefault(); alert('Limite de 5 personagens atingido.'); };
                createBtn.style.opacity = '0.5';
                createBtn.innerHTML = 'Limite Atingido (5/5)';
            } else {
                createBtn.onclick = () => window.location.href = 'create-character.html';
                createBtn.style.opacity = '1';
                createBtn.innerHTML = '<i data-lucide="plus"></i> Criar Novo Personagem';
                if (window.lucide) lucide.createIcons();
            }

            // Render Items
            if (allChars.length === 0) {
                list.innerHTML = '<div style="text-align:center; color:#888; padding:3rem; font-style:italic;">Sua jornada ainda não começou.<br><span style="font-size:0.9rem; opacity:0.7;">Crie seu primeiro caçador.</span></div>';
            } else {
                allChars.forEach((char, index) => {
                    const item = document.createElement('div');
                    const isOni = char.race === 'Oni';
                    const accentColor = isOni ? '#d90429' : '#00b4d8';
                    const glowColor = isOni ? 'rgba(217, 4, 41, 0.2)' : 'rgba(0, 180, 216, 0.2)';

                    // Container Style
                    item.style.cssText = `
                        position: relative;
                        display: flex; 
                        justify-content: space-between; 
                        align-items: center; 
                        background: linear-gradient(90deg, #121216 0%, #1a1a24 100%); 
                        padding: 1.2rem; 
                        border-radius: 12px; 
                        border: 1px solid #2a2a35; 
                        margin-bottom: 12px;
                        overflow: hidden;
                        transition: all 0.3s ease;
                        cursor: pointer;
                        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
                    `;

                    // Hover Effect (via inline JS for simplicity here, though CSS class is better)
                    item.onmouseover = () => {
                        item.style.transform = 'translateY(-3px)';
                        item.style.borderColor = accentColor;
                        item.style.boxShadow = `0 10px 20px ${glowColor}`;
                    };
                    item.onmouseout = () => {
                        item.style.transform = 'translateY(0)';
                        item.style.borderColor = '#2a2a35';
                        item.style.boxShadow = '0 4px 10px rgba(0,0,0,0.3)';
                    };
                    item.onclick = () => selectChar(char.id);

                    // Avatar Logic
                    let avatarSrc = '';
                    let avatarContent = '';
                    if (char.avatar) {
                        avatarContent = `<img src="${char.avatar}" style="width:100%; height:100%; object-fit:cover;">`;
                    } else {
                        avatarContent = `<span style="font-size:1.8rem;">${getIconByRace(char.race)}</span>`;
                    }

                    // Style Name
                    let styleName = 'Semeador';
                    if (!isOni) {
                        if (char.breathingStyle) {
                            if (typeof char.breathingStyle === 'object' && char.breathingStyle.name) {
                                styleName = char.breathingStyle.name;
                            } else if (typeof char.breathingStyle === 'string') {
                                const styleMap = { 'water': "Respiração da Água", 'thunder': "Respiração do Trovão", 'beast': "Respiração da Fera", 'flame': "Respiração das Chamas", 'wind': "Respiração do Vento" };
                                styleName = styleMap[char.breathingStyle] || char.breathingStyle;
                            }
                        }
                    } else {
                        styleName = char.kekkijutsu || 'Kekkijutsu';
                    }

                    item.innerHTML = `
                        <div style="display:flex; gap:18px; align-items:center; position:relative; z-index:2; flex:1;">
                            
                            <!-- Avatar Circle -->
                            <div style="
                                width: 64px; 
                                height: 64px; 
                                border-radius: 50%; 
                                background: #222; 
                                border: 2px solid ${accentColor}; 
                                display: flex; 
                                align-items: center; 
                                justify-content: center; 
                                overflow: hidden;
                                box-shadow: 0 0 15px ${glowColor};
                                flex-shrink: 0;
                            ">
                                ${avatarContent}
                            </div>

                            <div style="flex:1;">
                                <div style="display:flex; align-items:center; gap:10px;">
                                    <h3 style="margin:0; font-family:'Cinzel', serif; font-size:1.3rem; color:#fff; letter-spacing:1px;">${char.name}</h3>
                                    <span style="
                                        font-size: 0.65rem; 
                                        font-weight: 800; 
                                        padding: 2px 8px; 
                                        border-radius: 12px; 
                                        background: ${glowColor}; 
                                        color: ${accentColor}; 
                                        border: 1px solid ${accentColor};
                                        text-transform: uppercase;
                                    ">${char.race === 'Oni' ? 'ONI' : 'CAÇADOR'}</span>
                                </div>
                                <div style="display:flex; align-items:center; gap:15px; margin-top:6px;">
                                    <div style="font-size:0.85rem; color:#aaa; display:flex; align-items:center; gap:6px;">
                                        <i data-lucide="zap" size="14" color="${accentColor}"></i> ${styleName}
                                    </div>
                                    <div style="font-size:0.85rem; color:#fff; display:flex; align-items:center; gap:6px; font-weight:bold;">
                                        <i data-lucide="chevrons-up" size="14" color="#ffb703"></i> Nível ${char.level}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div style="z-index:2; padding-left:15px; border-left:1px solid #333;">
                            <button onclick="deleteChar('${char.id}', event)" 
                                onmouseover="this.style.color='#d90429'; this.style.background='rgba(217,4,41,0.1)'" 
                                onmouseout="this.style.color='#666'; this.style.background='transparent'"
                                style="
                                    background: transparent; 
                                    border: none; 
                                    color: #666; 
                                    cursor: pointer; 
                                    width: 36px; 
                                    height: 36px; 
                                    border-radius: 6px; 
                                    display: flex; 
                                    align-items: center; 
                                    justify-content: center; 
                                    transition: all 0.2s;
                                " title="Apagar Personagem">
                                <i data-lucide="trash-2" size="18"></i>
                            </button>
                        </div>
                    `;
                    list.appendChild(item);
                });
                if (window.lucide) lucide.createIcons();
            }
        }

        function getColorByRace(race) {
            if (race === 'Marechi') return '#d90429';
            if (race === 'Tsuyoi') return '#ffb703';
            return '#00b4d8'; // Human default
        }

        function getIconByRace(race) {
            if (race === 'Marechi') return '🩸';
            if (race === 'Tsuyoi') return '💪';
            return '👤';
        }

        function selectChar(id) {
            // Find char, set as active, go to dashboard
            const stored = localStorage.getItem('demonSlayerAllChars');
            if (!stored) return;
            const allChars = JSON.parse(stored);
            const selected = allChars.find(c => c.id === id);

            if (selected) {
                localStorage.setItem('demonSlayerChar', JSON.stringify(selected));
                window.location.href = 'dashboard.html';
            }
        }

        function deleteChar(id, e) {
            e.stopPropagation(); // prevent selection
            if (!confirm("Tem certeza que deseja apagar este personagem? Esta ação é irreversível.")) return;

            let allChars = JSON.parse(localStorage.getItem('demonSlayerAllChars') || '[]');
            allChars = allChars.filter(c => c.id !== id);
            localStorage.setItem('demonSlayerAllChars', JSON.stringify(allChars));

            // Check if active char was deleted
            const active = JSON.parse(localStorage.getItem('demonSlayerChar') || '{}');
            if (active.id === id) {
                localStorage.removeItem('demonSlayerChar');
            }

            renderCharList();
        }

        // === OPTIONAL AUTHENTICATION ===
        function checkAuthentication() {
            try {
                if (typeof AuthSystem !== 'undefined') {
                    const session = AuthSystem.getSession();
                    if (session) {
                        console.log('Usuário logado:', session.username);
                        updateNavbarWithUser(session);
                        return true;
                    }
                } else {
                    // Fallback
                    const session = localStorage.getItem('demonSlayerSession');
                    if (session) {
                        const sessionData = JSON.parse(session);
                        updateNavbarWithUser(sessionData);
                        return true;
                    }
                }

                // Not logged in, but that's OK - show login option
                addLoginButton();
                return false;
            } catch (err) {
                console.error('Erro ao verificar sessão:', err);
                addLoginButton();
                return false;
            }
        }

        function addLoginButton() {
            const navActions = document.querySelector('.nav-actions');
            if (navActions && !document.getElementById('login-link')) {
                const loginLink = document.createElement('a');
                loginLink.id = 'login-link';
                loginLink.href = 'login.html';
                loginLink.className = 'btn-outline';
                loginLink.innerHTML = `
                    <i data-lucide="log-in" style="width:16px;"></i> LOGIN
                `;
                navActions.appendChild(loginLink);
                if (window.lucide) lucide.createIcons();
            }
        }

        function updateNavbarWithUser(sessionData) {
            const navActions = document.querySelector('.nav-actions');
            if (navActions && !document.getElementById('user-menu')) {
                navActions.innerHTML = ''; // Clear login btn
                const userMenu = document.createElement('div');
                userMenu.id = 'user-menu';
                userMenu.style.cssText = 'display: flex; align-items: center; gap: 1rem;';
                userMenu.innerHTML = `
                    <a href="characters.html" class="btn-outline" 
                       style="
                           border-color: #00b4d8; 
                           color: #00b4d8; 
                           border-radius: 50%; 
                           width: 42px; 
                           height: 42px; 
                           padding: 0; 
                           display: flex; 
                           align-items: center; 
                           justify-content: center;
                           margin-right: 15px; /* Espaço reduzido */
                       "
                       title="Meus Personagens">
                        <i data-lucide="users" style="width:20px;"></i> 
                    </a>
                    
                    <div style="display:flex; align-items:center; gap:10px; border-left:1px solid rgba(255,255,255,0.2); padding-left:20px;">
                        <span style="color: #ccc; font-size: 0.9rem; font-weight:600;">
                            ${sessionData.username}
                        </span>
                        <button onclick="handleLogout()" style="
                            background: transparent;
                            border: none;
                            color: #666;
                            cursor: pointer;
                            transition: all 0.2s;
                            display: flex;
                            align-items: center;
                        " onmouseover="this.style.color='#ef4444'"
                        onmouseout="this.style.color='#666'"
                        title="Sair da Conta">
                            <i data-lucide="log-out" style="width:20px;"></i>
                        </button>
                    </div>
                `;
                navActions.appendChild(userMenu);

                if (window.lucide) lucide.createIcons();
            }
        }

        function handleLogout() {
            if (confirm('Deseja realmente sair?')) {
                if (typeof AuthSystem !== 'undefined') {
                    AuthSystem.logout();
                } else {
                    localStorage.removeItem('demonSlayerSession');
                }
                window.location.reload();
            }
        }

        // Check authentication on page load (optional)
        window.addEventListener('DOMContentLoaded', () => {
            checkAuthentication();
            renderCharList();
        });
    </script>
    <script>
        // Toggle Mobile Menu
        function toggleMobileMenu() {
            const drawer = document.getElementById('mobileDrawer');
            const overlay = document.getElementById('drawerOverlay');

            if (drawer.classList.contains('active')) {
                drawer.classList.remove('active');
                overlay.classList.remove('active');
            } else {
                drawer.classList.add('active');
                overlay.classList.add('active');
            }

            // Re-render icons just in case
            if (window.lucide) lucide.createIcons();
        }

        // --- INTERSECTION OBSERVER FOR REVEAL ---
        document.addEventListener('DOMContentLoaded', () => {
            const observerOptions = {
                threshold: 0.15,
                rootMargin: "0px 0px -50px 0px"
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

            // Create Wisteria
            createWisteria();

            // Init Default Style
            previewStyle('water');
        });

        // --- STYLE CHOOSER LOGIC ---
        const styleData = {
            water: {
                title: "Água",
                desc: "Fluida, adaptável e implacável. A defesa perfeita que se transforma em um ataque devastador. Para aqueles que mantêm a calma no caos.",
                img: "assets/Tanjirou_manga.png",
                bgClass: "bg-water-art"
            },
            flame: {
                title: "Chamas",
                desc: "Queime com convicção. Golpes devastadores e postura inabalável. Para aqueles que protegem os fracos com fogo no coração.",
                img: "https://assets.stickpng.com/images/5f5e56eb60010900045c7199.png",
                bgClass: "bg-flame-art"
            },
            thunder: {
                title: "Trovão",
                desc: "Velocidade explosiva e ataques fulminantes. Para quem decide o combate em um único golpe antes que o inimigo pisque.",
                img: "assets/Zenitsu_colored_body_2 (1).png",
                bgClass: "bg-thunder-art"
            },
            beast: {
                title: "Fera",
                desc: "Instinto puro e imprevisibilidade. Ataques selvagens e sentidos aguçados. Para quem luta sem regras.",
                img: "assets/Inosuke3 (1).png",
                bgClass: "bg-beast-art"
            },
            oni: {
                title: "Oni",
                desc: "Poder sobrenatural a um custo terrível. Regeneração, força bruta e artes de sangue. Para quem abraça a escuridão.",
                img: "assets/NezukoKamado.png",
                bgClass: "bg-oni-art"
            }
        };

        let currentLock = null;

        function previewStyle(styleKey) {
            if (currentLock && currentLock !== styleKey) return; // Optional locking behavior? Removing for fluid hover.

            // Actually, let's allow hover to override unless clicked? 
            // Better UX: Hover always previews. Click scrolls to CTA or just locks visual? 
            // The prompt says "Ao clicar/passar o mouse". Let's update on hover.

            updateStyleVisuals(styleKey);
        }

        function lockStyle(styleKey) {
            // Unused locking logic for now, but good hook for mobile tap
            updateStyleVisuals(styleKey);
            // Maybe scroll or animate flashy effect
        }

        function updateStyleVisuals(key) {
            const data = styleData[key];
            if (!data) return;

            // Update Backgrounds
            document.querySelectorAll('.style-bg-layer').forEach(bg => {
                if (bg.id === `bg-${key}`) bg.classList.add('active');
                else bg.classList.remove('active');
            });

            // Update Tabs Status
            document.querySelectorAll('.style-tab-btn').forEach(btn => {
                if (btn.dataset.style === key) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            // Update Info with simple fade glitch effect?
            const infoDisplay = document.getElementById('styleInfo');
            const title = document.getElementById('infoTitle');
            const desc = document.getElementById('infoDesc');
            const btn = document.getElementById('infoBtn');
            const img = document.getElementById('charArt');

            title.innerText = data.title;
            title.className = `style-title title-${key}`;

            desc.innerText = data.desc;

            btn.href = `create-character.html?style=${key}`;
            btn.className = `btn-style-cta btn-${key}`;

            // Image Transition
            if (img.src !== data.img && !data.img.includes(img.src.split('/').pop())) { // Simple check
                img.classList.remove('active');
                setTimeout(() => {
                    img.src = data.img;
                    img.classList.add('active');
                }, 300);
            }

            if (window.lucide) lucide.createIcons();
        }

        // --- TRANSITION LOGIC ---
        function playTransition(e, url) {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }

            const tLayer = document.getElementById('transitionLayer');
            tLayer.style.display = 'block';

            // Force Reflow
            void tLayer.offsetWidth;

            // Trigger Animation via Class
            requestAnimationFrame(() => {
                tLayer.classList.add('active');

                // Redirect logic
                setTimeout(() => {
                    window.location.href = url;
                }, 1200);
            });
        }

        function createWisteria() {
            const container = document.getElementById('wisteria');
            if (!container) return;

            const petalCount = 20; // Number of petals

            for (let i = 0; i < petalCount; i++) {
                const petal = document.createElement('div');
                petal.classList.add('petal');
                petal.style.left = Math.random() * 100 + '%';
                petal.style.animationDuration = (Math.random() * 3 + 4) + 's';
                petal.style.animationDelay = Math.random() * 5 + 's';
                petal.style.opacity = Math.random() * 0.5 + 0.3;
                container.appendChild(petal);
            }
        }
    </script>
    <script src="js/auth_system.js"></script>
    <script src="js/premium_system.js"></script>
</body>

</html>
```
